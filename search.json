[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "통알못을 위한 기초통계 3",
    "section": "",
    "text": "서문\nSaientia a Dei입니다. 2019년 1월부터 YouTube 통알못을 위한 기초통계 강의를 시작하게 되어 2021년부터는 이를 책으로 만드는 작업을 시작했습니다. 개인사정으로 인해 몇 년간 지지부진 하던 상황에서 마음을 다잡고 책을 썼습니다. 여러가지 옵션을 고민하던 중에 micro-web-book을 결정하였습니다. micro-web-book이란 개념도 제가 혼자 만든 것인데, 소책자 크기로 하여 주제별로 쪼개어 제공하는 것을 의미 합니다. 여기에는 나름 여러가지의 고민이 있었습니다. 이미 꽤 많은 양의 통계강의를 YouTube로 만들은데 반해 이 모든 내용을 한 번에 책으로 쓰기는 것이 제 개인적인 역량을 봐서는 단 기간에 어렵다고 판단한 것도 한가지 이유입니다. 그러나, 이보다 더 중요한 이유는 제 서재의 수많은 통계책을 보면서 고민한 것이 있습니다. 저도 미국에서부터 꽤 많은 통계책을 사서 읽었지만 수 백 페이지 정도의 두꺼운 통계책 중에 처음부터 끝까지 모두 다 읽은 경우는 정말 한 두 권 정도에 불과 했습니다. 저의 경우는 특정 부분이 필요 해서 구매한 통계책이 대부분이었습니다. 그래서 저도 통알못을 위한 책을 쓰는 마당에 보다 미래 지향적이고 실용적인 방법을 찾아야겠다는 마음을 먹었습니다. 운 좋게도 어느 출판사에서 책을 출판하자는 제안이 있기는 했지만, 돈 보다는 지식의 공유가 더 중요하다는 생각에 오픈 소스 북으로 책을 내기로 했고 이를 주제별로 쪼개서 시리즈물로 책을 쓰는 것이 좋겠다고 생각했습니다. 그러니 독자분들께서도 필요한 주제별로 micro-web-book을 읽으실 것을 권해드립니다. 두껍고 무겁기만한 종이책이 읽혀지지도 않은 채로 서재 어딘가에 몇 년간 방치되는 것 보다는 이 편이 낫다고 생각됩니다. 필요에 따라서 스마트폰이나 패드를 이용하셔서 출퇴근 시간 혹은 자투리 시간에 읽으실 수 있을 것입니다.\n3권은 일반적으로 가장 많이 사용되는 통계 방법에 대해 공부할 것입니다. 1장은 카이제곱 검정으로 시작하여 2장에서는 통계의 꽃이라고 불리는 회귀분석, 3장에서는 조절효과와 매개효과 마지막 4장은 로지스틱 회귀분석으로 마무리됩니다. 아마도 가장 많이 기다리셨던 책이 아닐까 생각됩니다.\n여전히 통계 전공자도 아닌 제가 강의를 하고 책을 쓰는 것이 부담스럽습니다. 이 책을 보시는 통계학과 교수님들과 전공자 분들에게 다시 한 번 너그러운 양해를 부탁드립니다. 정통 통계학적인 측면에서 보자면 오류가 있을 수 있습니다. 이 책의 내용에 대한 비판은 제가 감당할 부분이나 부드럽고 건설적인 비평을 부탁드립니다.\n이 책은 YouTube의 통통튜브 (통알못을 위한 통계튜브)의 온라인 비디오 강의를 보다 자세하게 풀어 말로 적은 것입니다. 처음 보시는 분들은 이 책을 한번 가볍게 보시고 난 후 각 절의 마지막에 있는 YouTube 바로가기 링크를 통해 비디오로 한 번 보시고 다시 본문을 읽어 보실 것을 권해드립니다. 한 번에 모든 것을 이해할 수 있다면 좋겠으나 반복 학습이 보다 효과적이라고 생각합니다. 유튜브 주소는 아래와 같습니다. 네이버 블로그에도 링크가 되어 있으니 편하신 플랫폼으로 비디오를 보시면 될 것 같습니다. 더불어 실습에 사용될 모든 샘플파일은 GitHub에 저장되어 있으니 자유롭게 다운로드 받아 사용하시기 바랍니다.\n마지막으로 제가 유투브를 통해 공개한 통통튜브의 내용이나 이 책의 내용을 무단으로 사용하지 마시길 부탁드립니다. 무료로 공개한 내용이지만 저의 노력과 오랜 기간의 아이디어가 담긴 것들입니다. 가끔 이런 무료공개 정보는 저작권이 없다고 생각하시고 심지어 제 강의 내용을 상업적 용도로 사용하시는 분들이 있는데 이는 분명한 저작물권의 침해입니다. 혼자 공부하기 위해 자료를 만들어 혼자서 보는 것은 누가 뭐라 할 수 없으나 정리된 내용을 인터넷으로 공개하거나 상업적인 목적으로 사용 혹은 배포하는 것은 분명 문제의 소지가 있음을 알려드립니다. 법적인 책임을 가리는 일이 없기를 바랍니다.\nYoutube 채널\n네이버 블로그\n샘플파일 다운로드\n부족한 제 강의와 책에 관심을 가져주시는 모든 분들께 감사의 말씀 올립니다.",
    "crumbs": [
      "서문"
    ]
  },
  {
    "objectID": "chapter1.html",
    "href": "chapter1.html",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "",
    "text": "1.1 카이제곱(\\(\\chi^2\\)) 검정에 대해 알아보자",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter1.html#카이제곱chi2-검정에-대해-알아보자",
    "href": "chapter1.html#카이제곱chi2-검정에-대해-알아보자",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "",
    "text": "1.1.1 지금까지와 다른 것\n지금까지 우리는 t-test, 분산분석(ANOVA)를 중심으로 공부해 왔습니다. 공통점이 있다면 종속변수는 연속변수(Continuous) 즉 양적변수(Quantitative)이고, 독립변수는 사실상 질적변수(Qualitative)였다는 점입니다. 즉, 독립변수는 2 개 혹은 3 개의 그룹이었고 종속변수만 연속변수였습니다. 그런데, 만약 독립변수와 종속변수 둘 다 명목척도 혹은 질적변수(Qualitative)라면 어떻게 될까요? 지금까지 배운 것으로 분석이 가능할까요?\n그렇지 않습니다. 독립변수와 종속변수가 모두 질적변수일 경우 사용하는 방법이 바로 교차분석입니다. 영어로는 chi-square(\\(\\chi^2\\)) test라고 합니다. 앞서 우리가 보았던 t-test 혹은 분산분석의 F-test를 떠 올려본다면, 당연히 여기서는 \\(\\chi^2 \\; \\text{value}\\)와 \\(\\chi^2\\)분포가 있습니다. 이제 하나씩 알아보겠습니다.\n\n\n1.1.2 카이제곱(\\(\\chi^2\\)) 검정의 목적\n우선 카이제곱(\\(\\chi^2\\)) 검정은 언제하는 것일까요? 앞에서 이야기 한 것처럼 독립변수와 종속변수가 모두 명목척도 즉 질적변수인 경우입니다. 결론적으로 데이터는 사실상 개수(count)가 됩니다. 앞에서 공부한 t-test나 분산분석(ANOVA)의 목적은 둘 혹은 세 그룹의 평균값이 같은지 다른지 알고 싶을 때 하는 것이었습니다. 카이제곱(\\(\\chi^2\\)) 검정의 목적은 다소 달라집니다. 카이제곱(\\(\\chi^2\\)) 검정은 변수가 한 개인 경우에도 할 수 있는데, 변수의 그룹간 비율이 같은지 다른지 확인할 대 가능합니다. 만약 한 변수의 그룹이 2 개라면 카이제곱(\\(\\chi^2\\)) 검정보다 단순한 Binomial test라는 것을 합니다. 그룹이 3 개 이상인 경우에는 카이제곱(\\(\\chi^2\\)) 검정을 하게 됩니다. 또한 카이제곱(\\(\\chi^2\\)) 검정은 변수가 두 개인 경우에도 할 수 있는데, 두 변수 사이의 연관성(Association)을 보고자 할 때 카이제곱(\\(\\chi^2\\)) 검정을 사용합니다. 예를 들어 휴대폰 사용과 암의 발병율을 조사할 때 가능합니다.\n\n\n1.1.3 카이제곱(\\(\\chi^2\\)) 계산식\n\\[\\chi^2 \\; \\text{value} = \\Sigma \\frac{(O - E)^2}{E}, \\; \\text{df} = \\text{범주의 개수} - 1\\]\n위의 식에서 O는 관찰빈도(Observed frequency), E는 기대빈도(Expected frequency)입니다. 위의 식에서 관찰빈도는 데이터에서 자연스럽게 주어지는 값이 되고, 기대빈도는 별도의 방법을 이용해 구해야 합니다. 여기서 말하는 기대빈도란 개념적으로 설명하자면 어떤 특별한 이유가 없는한 이렇게 동일하게 나와야 한다는 일종의 기대수치와 같은 개념입니다. 에를 들어 고객 데이터에서 특별한 이유가 없는 한 남성고객과 여성고객의 빈도는 동일하게 나타나야 할 것이라고 가정하면, 총 1000명의 고객이 있을 경우 남성과 여성은 각각 500명씩 있어야 한다는 식의 개념이 바로 기대빈도입니다.\n그럼 이제 조금 더 자세하게 알아보도록 하겠습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter1.html#일원-카이제곱one-way-chi2-test-검정을-계산해-보자",
    "href": "chapter1.html#일원-카이제곱one-way-chi2-test-검정을-계산해-보자",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "1.2 일원 카이제곱(One-way \\(\\chi^2\\) test) 검정을 계산해 보자",
    "text": "1.2 일원 카이제곱(One-way \\(\\chi^2\\) test) 검정을 계산해 보자\n여기서 일원(one-way)는 변수가 1 개라는 의미입니다. 한 개의 변수가 당연히 명목척도/질적변수이어야 합니다. 당연히 이 명목척도는 2 개 이상의 범주를 가지고 있어야 하며 데이터 코딩을 할 때는 한 개의 변수이므로 하나의 열(column)에 넣어야 합니다. 다음과 같은 예를 들 수 있습니다.\n\nPayment method라는 변수는 총 4개의 범주로 구성(Bank transfer/Credit card/Electronic check/Mailed check)\n고객의 지불방법에 따라 고객의 수가 차이가 나는지 알고 싶다면 일원 카이제곱(One-way \\(\\chi^2\\) test) 검정을 시행\n\n데이터는 다음과 같습니다.\n\n\n\nTable 1.1: 일원 카이제곱 검정 데이터\n\n\n\n\n\nLevel\nCount (빈도)\n%\n\n\n\n\nBank transfer\n1544\n21.90%\n\n\nCredit card\n1522\n21.60%\n\n\nElectronic check\n2365\n33.60%\n\n\nMailed check\n1612\n22.90%\n\n\nTotal (계)\n7043\n100.00%\n\n\n\n\n\n\n우리가 앞서 분산분석(ANOVA)에서 사용했던 데이터 중에서 독립변수입니다. 총 4 개의 범주가 있고 각 범주는 Bank transfer 21.9%, Credit card 21.6%, Electronic check 33.6%, Mailed check 22.9%로 구성되어 있습니다. Table 1.1 에서 그냥 빈도라고 되어 있는 것이 카이제곱 검정에서는 관찰빈도(O)가 됩니다. 이제 기대빈도까지 계산한 표를 확인해 보겠습니다.\n\n\n\nTable 1.2: 일원 카이제곱 검정 계산법\n\n\n\n\n\nLevel\n관찰빈도(O)\n%\n기대빈도(E)\n(O – E)2÷E\n\n\n\n\nBank transfer\n1544\n21.90%\n1761\n26.74\n\n\nCredit card\n1522\n21.60%\n1761\n32.44\n\n\nElectronic check\n2365\n33.60%\n1761\n207.16\n\n\nMailed check\n1612\n22.90%\n1761\n12.61\n\n\nTotal (계)\n7043\n100.00%\n\n278.95\n\n\n\n\n\n\n기대빈도는 총 7043개의 데이터가 4 개의 범주에 동일한 비율로 분포되어 있을 것이라는 가정에 따라서 \\(7043 \\div 4 = 1760.75\\)가 되어 반올림하여 기대빈도는 각 1761로 정하였습니다. 이제 관찰빈도(O)와 기대빈도(E)를 사용하여 각 범주의 계산 값을 구해보면 위의 Table 1.2 의 마지막 열(column)에 정리되어 있습니다.\n이제 \\(\\chi^2 \\; \\text{value} = 26.74 + 32.44 + 207.16 +12.61 = 278.95\\)가 됩니다. 이 경우 범주의 개수가 4 개이므로 \\(df = 4 - 1 = 3\\)이 됩니다. 이 두 가지를 표기하는 방법은 다음과 같습니다.\n\\[\\chi^2_{df=3} = 278.95\\]\n이때의 p-value를 구하려면 엑셀에서 chidist라는 함수를 사용하면 됩니다. 실제로 구해보면 거의 0에 가까운 값이 나와 매우 유의하다는 결과가 나옵니다. 카이제곱 검정 결과가 유의하다는 것은 무슨 뜻일까요?\n이를 이해하려면 카이제곱 검정의 통계적 가설을 이해할 필요가 있습니다. 우리가 테스트한 내용을 통계적 가설로 쓰면 다음과 같습니다.\n\\[H_0: \\text{P(Bank transfer)} = \\text{P(Credit card)} = \\text{P(Electronic check)} = \\text{P(Mailed check)}\\] \\[H_a: \\text{Proportion of 4 categories are not even}\\]\n귀무가설에서 P는 영어의 Proportion 즉 비율을 의미합니다. 여담입니다만, 가끔 ratio와 proportion이 뭐가 다르냐는 질문을 받습니다. 둘 다 한 개의 값을 다른 값으로 나눈 것이라는 계산 방식은 비슷합니다만, 일반적으로 ratio는 완전히 서로 다른 개념의 것을 나누어 비율로 표현한 것이라면, Proportion은 전체 중 특정한 부분이 차지하는 비율을 의미한다고 볼 수 있겟습니다. 즉, 여기서 네 개의 Proportion을 합치면 1이 되는 경우이므로 이런 경우에는 Proportion이라고 부릅니다.\n그러므로 카이제곱 검정이 유의하다는 것은 비율이 각 범주 간에 동일하지 않다는 의미가 되는 것입니다. 사실 여기서 이야기 하는 유의하다는 것은 기대되는 비율 즉 모든 범주가 동일할 것이라는 기대에 다르다는 의미가 됩니다.\n그러나 만약 기대빈도가 이론에 의해 사전적으로 1:1:1:1이 아니고 1:1:2:1이라면 기대빈도 자체가 애초에 다르게 설정되어 카이제곱 값이 계산되어야 합니다. 이 경우 20%:20%:40%:20%로 계산되어야 해서 1049:1049:2817:1049가 기대빈도로 사용되어야 합니다. 이런 이유로 카이제곱 검정을 적합도(goodness of fit)이라고 부르기도 합니다. 이런 이름은 한참 뒤에 나올 CFA나 SEM과 같은 곳에서 사용될 것입니다. 지금은 이정도만 이해하면 됩니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter1.html#이원-카이제곱one-way-chi2-test-검정을-계산해-보자",
    "href": "chapter1.html#이원-카이제곱one-way-chi2-test-검정을-계산해-보자",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "1.3 이원 카이제곱(One-way \\(\\chi^2\\) test) 검정을 계산해 보자",
    "text": "1.3 이원 카이제곱(One-way \\(\\chi^2\\) test) 검정을 계산해 보자\n\n1.3.1 기본예제\n이원 카이제곱 검정(Two-way \\(\\chi^2\\) test)에서 Two-way란 Two-way ANOVA와 같이 변수가 2개라는 의미입니다. 두 개의 변수 모두 당연히 명목척도 (Qualitative variable)이고, 이 두 명목척도는 2개 이상의 범주(category)를 가지게 됩니다. 즉 두 개 이상의 그룹을 각 변수가 가지고 있다는 의미입니다. 변수가 두 개 이므로 당연히 데이터 코딩 시 두 개의 열(column)에 코딩해야 합니다. 이 때의 가장 단순한 형태는 \\(2 \\times 2\\)가 될 것입니다. 즉, 각각 두 개의 그룹을 가지고 있는 두 변수를 의미 합니다. 이 경우 이를 표현하는 방법이 바로 분할표 (contingency table)입니다. 분할표란 데이터의 빈도만 표에 작성하는 것을 말하는데, 분할표는 두개의 변수를 행(Row)과 열(Column)으로 나누어 빈도를 정리합니다. 이 분할표를 통해 이원 카이제곱 검정을 할 때의 목적은 행과 열 사이에 (즉 두 변수 사이에) 어떠한 연관성이 있는지 확인해보는 것입니다.\n다음은 우리가 사용할 예제입니다. 200명의 암환자를 임의 추출하여 다음의 두 가지를 조사했습니다.\n\n진단받은 암이 Brain cancer인지의 여부: Yes or No\n암을 진단받았을 때 휴대폰을 사용한지 3년 이상 되었는지의 여부: Yes or No\n\n이를 바탕으로 다음의 \\(2 \\times 2\\) 분할표를 작성하였습니다.\n\n\n\n\n\n\nFigure 1.1: 이원 카이제곱 검정 분할표\n\n\n\n그렇다면 위의 표를 바탕으로 몇 가지 단순한 사실을 알아보겠습니다. 만약 Brain cancer와 cell phone의 사용 사이에 어떤 관련이 있으려면 전체 Brain cancer 환자의 몇 퍼센트가 3년 이상 cell phone을 사용했는지 알아볼 필요가 있습니다. 이를 통계적인 언어로 표현하면 다음과 같습니다.\n\\[P(CP | BC) = 18 \\div 25 = 0.72\\]\n위에서 P()는 일반적으로 확률(Probability)를 의미합니다만, 사실 여기서는 정확하게 말하자면 Proportion이라고 보는 편이 나을 것 같습니다. 다만 설명의 편의를 위해 확률이라고 이야기하겠습니다. CP는 Cell phone을 BC는 Brain cancer를 의미합니다. 그러므로 총 Brain cancer 환자 25명 중 18명이 3년 이상 cell phone을 사용했다는 것을 알 수 있고 이를 확률로 계산해보니 72%정도가 됩니다. 반면에 다른 암 환자 중에서 3년 이상 cell phone을 사용한 사람을 조사해 보면 다음과 같습니다. 다음 암 환자 총 175명 중 80명이 3년 이상 cell phone을 사용하여 46%의 확률을 보였습니다.\n\\[P(CP | NBC) = 80 \\div 175 = 0.46\\]\n이제 이원 카이제곱 검정을 계산해 보도록 하겠습니다. 일단 이 예제에서 이원 카이제곱 검정의 목적은 Brain cance와 cell phone의 연관성(association)을 알아 보는 것입니다. 여기서 조심해야 할 것이 바로 연관성이라는 단어입니다. 가끔 신문 기사나 혹은 심지어 논문 분석 결과에서 이 연관성을 인과관계로 보고 해석하는 경우가 있는데 이는 사실 조심해야할 부분입니다. 연관성이 있다와 인과관계가 있다는 비슷해 보여도 분명 다른 것입니다. 연관성이 있다고 해서 인과관계가 있는 것은 아니라는 의미입니다. 여기서는 \\(2 \\times 2\\)분할표를 사용해서 계산할 것입니다. 이원 카이제곱 검정의 통계적 가설을 다음과 같습니다.\n\\[H_0: \\text{Brain cancer와 cell phone 사용 간에는 연관성이 없다}\\]\n\\[H_a: \\text{Brain cancer와 cell phone 사용 간에는 연관성이 있다}\\]\n앞서 일원 카이제곱 검정에서 보았듯이 이 테스트를 하려면 기본적으로 데이터에서 구해진 빈도와 기대빈도(E)를 알아야 \\(\\chi^2\\)값을 구할 수 있습니다. 기대빈도 계산법은 다음과 같습니다.\n\\[E(\\text{기대빈도}) = \\frac{\\text{(Row Total)} \\times \\text{(Column Total)}}{\\text{Grand Total}} = \\frac{\\text{(행합계)} \\times \\text{(열합계)}}{\\text{총합계}}\\]\n위의 계산을 바탕으로 기대빈도를 작성한 표는 다음과 같습니다.\n\n\n\n\n\n\nFigure 1.2: 이원 카이제곱 검정 기대빈도\n\n\n\n위에서 계산된 내용을 다시 살펴보면 다음과 같습니다.\n\\[E(CP\\&BC) = \\frac{98 \\times 25}{200} = 12.25\\]\n\\[E(CP\\&NBC) = \\frac{98 \\times 175}{200} = 85.75\\]\n\\[E(NCP\\&BC) = \\frac{102 \\times 25}{200} = 12.75\\]\n\\[E(NCP\\&NBC) = \\frac{102 \\times 175}{200} = 89.25\\]\n이제 Figure 1.1 과 Figure 1.2 를 이용해 \\(\\chi^2\\)값을 계산해 보겠습니다.\n\\[\\begin{matrix}\n  \\chi^2 &=& \\frac{(18-12.25)^2}{12.25} + \\frac{(7-12.75)^2}{12.75} \\\\\n         &&  + \\frac{(80-85.75)^2}{85.75} + \\frac{(95-89.25)^2}{89.25} \\\\\n         &=& \\small{6.048}\n  \\end{matrix}\\]\n\\[df = (2-1) \\times (2-1) = 1 \\]\n\\[\\chi^2_{df=1} = 6.048, \\;p-value = 0.014\\]\n그러므로 Brain cancer와 cell phone 사용 간에는 어떤 연관성이 있다고 결론 내릴 수 있습니다. 물론 조심할 것은 여기서 인과관계가 있다라고 해석하면 곤란합니다. 만약 이 결과를 놓고 Brain cancer의 원인이 cell phone 사용 때문이라고 하면 이는 우리의 통계적 분석 결과를 뛰어 넘는 과도한 해석이 됩니다. 문제는 제가 한국에서 이런 논문을 꽤 많이 봤다는 사실입니다. 인과관계를 이야기 하려면 사실 이런 단순한 카이제곱 검정만으로는 부족하다고 할 수 있습니다.\n\n\n1.3.2 추가예제\n그렇다면 추가적인 예제를 하나 더 보겠습니다.\n어떤 보험사에서 지진보험을 상품으로 판매하고 있습니다. 이 보험사는 지진의 위험성이 지역적으로 차이가 있을 것으로 보고 이에따라 지역별로 지진보험 가입 정도가 다를 가능성이 있을 것이라는 가설을 통계적으로 분석해보고자 합니다. 이를 위해 총 4 개 지역의 지진보험 가입유무를 조사한 결과를 정리한 표가 아래와 같이 있습니다.\n\n\n\n\n\n\nFigure 1.3: 지진보험 가입현황\n\n\n\n위의 지진보험 가입현황에 대한 기대빈도는 아래와 같습니다.\n\n\n\n\n\n\nFigure 1.4: 지진보험 가입 기대빈도\n\n\n\n위의 두 종류의 값을 이용하여 \\(\\chi^2\\)값을 구하면 다음과 같습니다. 가능하다면 엑셀을 이용하여 직접 계산해 보는 것을 권해드립니다. 눈으로 보고 넘어가는 것 보다는 직접 계산을 해보면 보다 이해가 잘 되고 기억에도 남습니다.\n\\[\\chi^2_{df=3} = 47.105, \\; p-value &lt; 0.05 \\]\n그러므로 지진보험 가입 유무는 거주지역과 연관성이 있다고 결론 내릴 수 있습니다. 다만 문제는 이 연관성 즉 지역별 가입 유무의 차이정도가 얼마나 되는지는 카이제곱 검정만으로는 알 수 없습니다. 또한 지역적 차이를 일대일로 알아내기는 불가능합니다. 이제 기본적인 카이제곱 검정은 다 알아보았습니다. 이제 카이제곱 검정과 관련이 있는 보다 어려운 내용에 대해 알아보도록 하겠습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter1.html#카이제곱-chi2-test-검정을-넘어서",
    "href": "chapter1.html#카이제곱-chi2-test-검정을-넘어서",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "1.4 카이제곱 (\\(\\chi^2\\) test) 검정을 넘어서",
    "text": "1.4 카이제곱 (\\(\\chi^2\\) test) 검정을 넘어서\n여기서는 카이제곱 검정의 전제조건과 한계점 그리고 이를 해결하기 위한 방법을 간단하게 알아보고, 카이제곱검정과 관련이 있지만 다소 복잡한 방법에 대해 알아보겠습니다. 일반적인 카이제곱 검정보다는 여기서 배우는 방법이 조금 더 낫다는 생각이 들긴 합니다.\n\n1.4.1 전제조건\n카이제곱 검정의 몇 가지 전제조건은 다음과 같습니다.\n\n랜덤 샘플링: 당연한 이야기 이지만 의외로 랜덤 샘플링이라는 조건이 연구를 하다보면 쉽지 않다는 사실을 알게 됩니다.\n독립셩\n\n\n여기서 독립성이란 변순 내의 각 범주가 서로 상호 배타적이어야 한다는 의미입니다. 즉 한 관찰값이 여러 개의 범주에 동시에 해당될 수 없다는 의미 입니다.\n\n\n분할표 상의 각 셀의 기대빈도는 적어도 5 이상이어야 한다.\n\n\n그러므로 경우에 따라서는 기대빈도를 5 이상으로 맞추기 위해 볌주를 합쳐야 할 수도 있습니다.\n만약 범주를 합치는 것이 불가능 하다면, 피셔의 정확검정을 하거나 Likelihood ratio test를 해야합니다.\n\n\n\n1.4.2 주로 문제가 되는 경우\n주로 문제가 되는 경우는 df가 1인 경우입니다. 즉 범주가 단 2 개인 경우를 의미합니다. 예를 들어 이원 카이제곱 검정을 할 때 \\(2 \\times 2\\)인 경우가 해당됩니다. 문제는 비연속성의 조건부 확률을 연속성의 \\(\\chi^2\\)분포에 적용함으로써 발생되는데, 이런 경우 일원 카이제곱 검정이라면 연속성을 보정하는 Yate’s correction 혹은 \\(\\chi^2\\) continuity correction이라는 것을 해야합니다. 만약 이원 카이제곱 검정이라면 검정 결과와 Yate’s correction의 결과가 다를 경우 피셔의 정확검정을 사용하는 것이 좋습니다. 사실 이런 경우는 정확히 표현하자면 어쩔 수 없는 경우가 아니라면 카이제곱 검정을 하지 않는 것이 현실적으로는 옳은 판단일 수 있습니다.\n\n\n1.4.3 상대 위험도(Relative risk)\n상대 위험도란 두 확률의 차이인 \\(P_1 - P_2\\)가 아니라 \\(P_1 \\div P_2\\)를 의미하고 주로 의학쪽에서 많이 사용합니다. 만약 상대 위험도가 1 이라면 두 사건이 발생할 확률은 동일하고 1보다 크다면 위험이 증가한다고 보고, 1보다 작다면 위험이 감소한다고 해석합니다.\n앞서 본 예제를 다시 이용해서 상대 위험도를 설명해 보자면 다음과 같습니다.\n\n\n\n\n\n\nFigure 1.5: 상대위험도\n\n\n\n휴대폰 사용자 중 Brain cancer의 확률은 \\(P(BC|CP) = 18 \\div 98 = 0.184\\) 이고 휴대폰 비사용자 중 Brain cancer의 확률은 \\(P(BC|NCP) = 7 \\div 102 = 0.069\\)가 되어 상대위험도는 다음과 같습니다.\n\\[\\text{상대위험도(Relative risk: RR)} = 0.184 \\div 0.069 = 2.67\\]\n이는 휴대폰 사용자가 그렇지 않는 사람에 비해 약 2.67배 Brain cancer에 걸릴 확률이 높다고 해석합니다.\n\n\n1.4.4 교차비 or 오즈비(Odds ratio)\n오즈비를 이해하려면 먼저 오즈(odds)에 대해 알아야 합니다. 사전적으로는 오즈(odds)란 확률을 의미하지만 통계에서 오즈(odds)는 확률과 조금 다르게 계산됩니다.\n\\[Odds = \\frac{p}{1-p}\\]\n여기서 \\(p\\)는 어떤 사건이 발생할 확률을 의미합니다. 이를 해석하기 위해 두 가지 예를 들어보겠습니다.\n\n예제 1\n\n\n만약 어떤 사건이 일어날 확률 \\(p\\)가 \\(\\frac{1}{2}\\)이라면 오즈(odds)는 \\(\\frac{1}{2} \\div \\frac{1}{2} = 1\\)\n이는 어떤 사건이 일어날 확률이 \\(\\frac{1}{2}\\)이라면 오즈(odds)가 의미하는 것은 이 사건이 일어나지 않을 확률 대비 일어날 확률은 동일하다는 의미\n\n\n예제 2\n\n\n만약 어떤 사건이 일어날 확률 \\(p\\)가 \\(\\frac{3}{4}\\)이라면 오즈(odds)는 \\(\\frac{3}{4} \\div \\frac{1}{4} = 3\\)\n이는 어떤 사건이 일어날 확률이 \\(\\frac{3}{4}\\)이라면 오즈(odds)가 의미하는 것은 이 사건이 일어나지 않을 확률 대비 일어날 확률은 3배 높다는 의미\n\n그렇다면 오즈비(odds ratio)란 두 오즈(odds)의 비율을 의미합니다.\n\\[\\theta = \\frac{\\frac{P(A|B)}{1-P(A|B)}}{\\frac{P(A|C)}{1-P(A|C)}}\\]\n앞의 상대 위험도와 같은 방법으로 오즈비를 구해보겠습니다.\n휴대폰 사용자 중 Brain cancer의 확률은 \\(P(BC|CP) = 18 \\div 98 = 0.184\\) 이고 휴대폰 비사용자 중 Brain cancer의 확률은 \\(P(BC|NCP) = 7 \\div 102 = 0.069\\)가 되어 오즈비는 다음과 같습니다.\n\\[\\theta = \\frac{\\frac{P(A|B)}{1-P(A|B)}}{\\frac{P(A|C)}{1-P(A|C)}} = \\frac{\\frac{0.184}{0.816}}{\\frac{0.069}{0.931}} = \\frac{0.225}{0.074} = 3.04\\]\nBrain cancer가 발생할 오즈는 휴대폰 사용자가 그렇지 않은 사람보다 약 3배 정도 높다는 의미가 됩니다.\n이제 오즈비의 장점을 알아보겠습니다. 같은 데이터에서 만약 확률을 행에서 열로 바꾸면 어떻게 될까요? 즉, Brain cancer 환자 중에서 휴대폰 사용자의 확률과 다른 암 환자 중에서 휴대폰 사용자의 확률을 이용하면,\n\\[P(CP|BC) = 18 \\div 25 = 0.72\\]\n\\[P(CP|NBC) = 80 \\div 175 = 0.457\\]\n\\[\\theta = \\frac{\\frac{P(A|B)}{1-P(A|B)}}{\\frac{P(A|C)}{1-P(A|C)}} = \\frac{\\frac{0.72}{0.28}}{\\frac{0.457}{0.543}} = \\frac{2.57}{0.842} = 3.05\\]\n즉, 휴대폰을 가지고 있을 오즈는 Brain cancer 환자가 다른 암 환자 보다 약 3배 정도 높다는 의미가 됩니다. 결론적으로 행과 열을 바꾸어서 계산해 보아도 오즈비는 거의 비슷하게 나오는 특징이 있습니다. 결국 데이터의 영향에 매우 덜 민감한 반면, 이를 단순 오즈(odds)나 상대 위험도로 계산해 보면 크게 숫자가 변하는 것을 알 수 있습니다.\n마지막으로 쉽게 \\(2 \\times 2\\)의 오즈비를 계산하는 방법을 이야기하고 마치겠습니다.\n\n\n\n\n\n\nFigure 1.6: 오즈비 쉽게 계산하는 법\n\n\n\n\\[\\theta = \\frac{n_{11} \\times n_{22}}{n_{12} \\times n_{21}} = \\frac{18 \\times 95}{80 \\times 7} = 3.05\\]\n이런식으로 계산할 수 있습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter1.html#카이제곱-chi2-test-검정을-실습해-보자",
    "href": "chapter1.html#카이제곱-chi2-test-검정을-실습해-보자",
    "title": "1  카이제곱(\\(\\chi^2\\)) 검정",
    "section": "1.5 카이제곱 (\\(\\chi^2\\) test) 검정을 실습해 보자",
    "text": "1.5 카이제곱 (\\(\\chi^2\\) test) 검정을 실습해 보자\n실습용 데이터는 앞서 분산분석에서 사용한 적이 있는 Telco Customer Churn 데이터를 사용하겠습니다. 캐글(www.kaggle.com)에 들어가서 검색해 보시면 찾으실 수 있습니다. 어려우신 분들은 여기서 다운로드 받으시기 바랍니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>카이제곱($\\chi^2$) 검정</span>"
    ]
  },
  {
    "objectID": "chapter2.html",
    "href": "chapter2.html",
    "title": "2  회귀분석",
    "section": "",
    "text": "2.1 회귀분석이란 무엇인가?",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#회귀분석이란-무엇인가",
    "href": "chapter2.html#회귀분석이란-무엇인가",
    "title": "2  회귀분석",
    "section": "",
    "text": "2.1.1 회귀분석이란?\n흔히 회귀분석을 통계의 꽃이라고 부릅니다. 사실 여태 공부한 내용은 모두 회귀분석을 위해 공부한 것이라고 해도 과언이 아닙니다. 문제는 많은 경우 회귀분석이 중요한 분석방법이라는 것은 잘 알고 있으면서도 중요한 것들은 정작 놓치고 있다는 사실입니다. 이제 회귀분석을 공부해 봅시다. 회귀분석을 이해하려면 먼저 이 방법의 이름부터 좀 이해하고 시작해야 합니다. 회귀분석은 영어로 Regression Analysis라고 부릅니다. 회귀란 단어나 Regression이란 단어 모두 같은 의미입니다. 회귀한다는 것은 어딘가로 되돌아간다는 의미입니다. 요즘 제가 좋아하는 웹툰들은 모두 회귀를 주제로 하더군요. 요즘 웹툰의 트렌드인가 싶긴합니다.\n그렇다면 도대체 어디로 되돌아간다는 것일까요? 어디로 회귀한다는 것일까요? 정답을 먼저 이야기 하자면 바로 평균으로의 회귀입니다. 사실 회귀분석은 평균과 관련된 이야기입니다. 그럼 회귀분석의 목적은 무엇일까요? 회귀분석은 기본적으로 예측(forecasting)이 목적입니다. 좀 더 자세하게 말하자면 독립변수로 종속변수를 예측하고자 하는 것이 기본적인 목적입니다. 일반적으로 독립변수가 1개이면 단순회귀분석, 독립변수가 여러 개인 경우 다중회귀분석이라고 합니다. 혹시라도 종속변수의 개수가 궁금하신 분들을 위해 더 자세하게 말씀드리자면 회귀분석에서는 종속변수는 무조건 1개입니다.\n\n\n2.1.2 회귀분석의 예제\n회귀분석을 이해하기 위해 예를 하나 들어보겠습니다.\n고전적인 경제학에서 다루던 예제입니다. 우리는 지금 개인의 수입과 지출 금액에 대한 정보를 데이터로 가지고 있습니다. 기본적인 가설은 개인의 수입이 많아질 수록 지출이 늘어날 것이라는 것이 우리의 가설입니다. 당연히 수입이 있어야 지출이 가능하기 때문에 이런 가설은 논리적으로 크게 문제가 없어 보입니다. 즉, 수입이 많은 사람이 지출도 많을 것이기 때문입니다. 그래서 우리가 가진 데이터를 다음과 같이 그래프로 그려보았습니다.\n\n\n\n\n\n\n\n\n\n\n\n(a) 수입과 지출\n\n\n\n\n\n\n\n\n\n\n\n(b) 수입 1억원에 대한 지출\n\n\n\n\n\n\n\nFigure 2.1: 회귀분석의 예제\n\n\n\nFigure 2.1 (a) 에서 보면 수입을 독립변수로 하여 X축에 지출을 종속변수로 하여 Y축에 두었습니다. 항상 지켜야할 약속은 독립변수는 X축에 종속변수는 Y축에 두는 것입니다. 이를 바꿔서 그리겠다고 하면 문제가 됩니다. 이러한 것은 일종의 약속이기 때문입니다. Figure 2.1 (a) 을 보니 우리가 가진 데이터가 우상향하는 경향이 있음을 알 수 있습니다. 그런데, 만약 우리가 궁금한 것이 만약 수입이 1억원이라면 지출이 얼마 정도 될지 알고 싶다고 가정합니다(Figure 2.1 (b)). 그럼 위의 데이터를 보면서 우리는 어떤 생각을 떠 올리게 될까요?\n\n\n\n\n\n\n\n\n\n\n\n(a) 추세선의 추가\n\n\n\n\n\n\n\n\n\n\n\n(b) 추세선을 이영한 예측\n\n\n\n\n\n\n\nFigure 2.2: 회귀분석의 추세선\n\n\n\n아마도 우리는 자연스럽게 우상향하는 데이터를 보면서 이 데이터를 대표할 수 있을 만한 직선 하나를 긋고 싶어하게 될 것입니다. 우리는 이 직선을 추세선(Figure 2.2 (a))이라고 부릅니다. 만약 우리가 충분히 믿을만한(?) 혹은 우리의 데이터를 가장 잘 대표할 수 있을 만한 추세선을 알 수만 있다면 이 추세선을 이용하여 Figure 2.2 (b) 에서 볼 수 있듯이 1억원의 수입에 대응하는 추세선의 값을 찾아서 지출을 예측할 수 있을 것입니다. 우리가 가진 데이터에서 수입이 1억원이 되는 실제 값이 없더라도 이 추세선을 이용한다면 충분히 수입이 1억원 정도 되는 사람이 얼마나 지출을 할지 예측할 수 있을 것입니다.\n결론적으로 회귀분석을 한다는 것은 회귀분석을 통해 이 추세선을 찾아내는 것이라고 할 수 있습니다. 회귀분석의 결과를 이용하면 우리는 이러한 추세선을 그릴 수 있기 때문입니다. 그렇다면 이제 이 추세선에 대해 좀 더 자세히 알아 봅시다.\n\n\n\n\n\n\nFigure 2.3: 추세선의 식\n\n\n\nFigure 2.3 에서 보는 것 처럼 추세선은 결국 2차원 평면상의 직선이고, 이는 우리가 중학교 때 배운 직선의 방정식을 이용해 간단하게 표현할 수 있습니다. 추세선의 직선의 방정식은 다음과 같습니다.\n\\[\\hat{y} = a + b\\bar{x}\\]\n여기서 일반적으로 사용되는 \\(x\\), \\(y\\) 대신에 \\(\\bar{x}\\)를 쓴 이유는 앞서 이야기 했듯이 회귀분석은 결국 평균값을 지나가는 것이기 때문입니다. 새로운 것이 바로 \\(\\hat{y}\\)인데, \\(y\\)위에 붙은 것을 모자 즉 hat이라고 부릅니다. 그래서 이를 읽을 때는 y hat이라고 읽습니다. 굳이 \\(y\\)가 아니라 \\(\\hat{y}\\)이라고 하는 이유는 이 둘을 구분해야 하기 때문입니다. 여기서 \\(y\\)는 애초에 우리가 가지고 시작한 데이터의 변수인 \\(y\\)입니다. 사실 정확하게 말하자면 \\(y_i\\)라고 해야할 것입니다. 왜냐하면 데이터의 사이즈 즉 관찰값의 개수에 따라 \\(i\\)는 1부터 \\(n\\)까지 있기 때문입니다. 그러므로 위의 식에서 말하는 \\(\\hat{y}\\)이란 데이터를 이용해 구해낸 추세선을 의미합니다. 사실 이 추세선을 회귀분석에서는 회귀식이라고 부르고 \\(\\hat{y}\\)은 회귀분석을 통해 예측된 일종의 예측값이 됩니다.\n그러나, 우리의 관심사는 사실 \\(\\bar{x}\\)도 \\(\\hat{y}\\)도 아닙니다. 위의 추세선 즉 회귀식에서 중요한 것은 \\(a\\)와 \\(b\\)입니다. \\(a\\)와 \\(b\\)에 대해서 우리는 이미 중학교 때 배운 바 있습니다. 그러나 한 번 더 기억을 되새겨 보면, \\(a\\)는 절편이라고 부릅니다. 영어로는 constant라고 하기도 합니다. \\(b\\)는 기울기라고 부르고 영어로는 slope 라고 합니다. 중요한 특성을 이야기 하자면 \\(x\\)가 0이 될 때 \\(\\hat{y} = a\\)가 됩니다. 그러므로 Figure 2.3 에서 보듯 절편 \\(a\\)는 y축과 회귀식(회귀직선)이 만나는 점이 됩니다. 좀 더 엄밀한 의미로 보면 \\(\\hat{y} = a\\)는 \\(y\\)값의 평균이 \\(a\\)라는 의미입니다. 왜냐하면 회귀분석은 평균으로의 회귀인데 \\(\\hat{y} = a\\)에서는 \\(x\\)가 없으므로 이 식은 \\(y\\)값의 평균을 의미합니다.\nFigure 2.3 를 보면 기울기 \\(b\\)를 다음과 같이 표현합니다.\n\\[b = \\frac{\\Delta{y}}{\\Delta{x}}\\]\n여기서 \\(\\Delta\\)란 델타라고 읽고 두 값의 차이 혹은 증가분을 의미합니다. 따라서 기울기 \\(b\\)는 \\(x\\)값의 증가분 분의 \\(y\\)값의 증가분입니다. 이해를 쉽게 하기 위해 위의 기울기의 식에서 분모의 \\(\\Delta{x} = 1\\)로 제한을 하면, 기울기 \\(b\\)란 \\(x\\)가 1 증가할 때 \\(y\\)값의 증가분이 됩니다. 다른 말로, \\(x\\)가 1 증가할 때 \\(y\\)값이 얼마나 증가했는지를 의미하는 것입니다. 만약 이 기울기가 크다면 회귀직선이 가파르게 증가하는 모양일 것이고, 이 기울기가 작다면 회귀직선이 매우 완만하게 증가하는 모양일 것입니다. 물론 이것은 기울기 \\(b\\)가 양수일 경우이고, 반대로 기울기 \\(b\\)가 음수라면 기울기가 커질 수록 회귀직선은 가파르게 감소하고 작을 수록 완만하게 감소한다는 의미가 됩니다.\n그렇다면 이제 Figure 2.3 의 데이터값 즉 점들은 어떻게 표현해야 할까요?\n\\[y_i = a + bx_i + e_i\\]\n위의 식에서 \\(e_i\\)란 오차를 의미합니다. 왜냐하면 \\(a\\)와 \\(b\\)는 회귀식에서 나온 것이므로 당연히 어떤 값 \\(x_i\\)를 이 회귀식에 넣어도 정확하게 \\(y_i\\)가 나오지 않을 것입니다. 이때 예측된 회귀직선의 식과 실제 관찰된 값의 차이가 오차 \\(e_i\\)가 되는 것이고, 오차는 모든 값에 따라 다 다르게 됩니다. 그렇다면 이제 우리는 이 오차에 조금 더 관심을 가져보도록 하겠습니다.\nFigure 2.3 를 데이터 부분만 확대해서 살펴보면 아래와 같습니다.\n\n\n\n\n\n\nFigure 2.4: 회귀직선과 오차\n\n\n\n위에서 설명했듯이 오차는 필연적으로 발생합니다. 혹시라도 오차가 전혀 없는 분석방법을 기대하셨다면 그건 어디까지나 판타지일 것입니다. 오차는 발생하기 마련이고 이 오차를 우리가 얼마나 잘 이용하느냐가 바로 통계의 핵심이기도 합니다. 위의 오차는 다음과 같이 표현될 수 있습니다.\n\\[e_i = y_i - \\hat{y_i}\\]\n즉, 오차란 측정값(혹은 관찰값)에서 예측값을 뺀 것입니다. 여기서 예측값이란 회귀분석을 통해 예측된 값을 의미합니다. 그렇다면 Figure 2.4 을 보면서 가장 합리적인 추세선이란 무엇일까 생각해 봅시다. 오차를 자세히 살펴보면 결론적으로 오차가 가장 작은 추세선이 가장 합리적인 추세선일 것입니다. 또한 이 추세선이 가장 데이터를 잘 표현하는 혹은 대표하는 추세선이 될 것입니다. 따라서 우리는 오차의 합이 가장 작은 추세선을 가장 합리적인 추세선으로 보고 이 추세선이 회귀직선이 되도록 하는 것이 가장 최선의 선택일 것입니다.\n문제는 이 오차가 양수(+)도 있고 음수(-)도 있다는 사실입니다. Figure 2.4 의 좌측편은 양수가 되는 오차이고 우측은 음수가 되는 오차입니다. 이렇게 음수와 양수의오차가 혼재되어 있을 경우 그냥 더하면 엉망진창이 될 것입니다. 어떻게 하면 될까요?\n맞습니다. 모든 오차를 제곱하여 합하면 됩니다.\n그러므로, 가장 합리적인 추세선이란 오차의 제곱의 합이 최소화된 직선일 것입니다. 우리는 이 방법을 수학적으로 최소제곱법이라고 합니다. 즉 앞에서 본 회귀직선의 방정식에서 우리가 필요로 하는 \\(a\\)와 \\(b\\)는 최소제곱법이라는 수학적 방법으로 구해집니다.\n그러데, 이 표현이 어디서 많이 본 것 같지 않나요? 사실 가만히 생각해보면 왜 회귀분석이 즉 회귀직선이 평균을 지나가야 하는지 이해가 됩니다. 사실 최소제곱법이라는 수학적인 방법을 우리가 여기서 공부할 필요는 없습니다. 수학과 혹은 통계학과 전공자라면 알아야 하겠지만 우리는 이해만 하면 됩니다. 오차의 제곱의 합이 최소가 된다는 것은 결국 계산상 분산의 분자부분의 계산방법과 매우 유사하고 이 부분이 최소가 되려면 결국 평균값을 지나가는 것이 최선이라는 의미가 됩니다. 그러므로 우리의 데이터를 가장 잘 나타내는 합리적인 직선인 회귀직선은 평균을 지나가는 그리고 오차의 제곱의 합이 최소가 되는 직선이 된다는 것입니다. 일반적으로 이러한 회귀분석의 방법을 영어로는 기본적으로 OLS (Ordinary Least Square)라고 합니다.\n이제 회귀분석의 기초적인 내용을 이해했습니다. 조금씩 더 앞으로 나가보도록 합시다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#결과표를-해석하자",
    "href": "chapter2.html#결과표를-해석하자",
    "title": "2  회귀분석",
    "section": "2.2 결과표를 해석하자",
    "text": "2.2 결과표를 해석하자\n앞서 공부한 다른 방법들은 계산하는 법이라던가 기본적인 체계를 먼저 이해하고 분석결과를 해석하는 순서로 진행했지만, 제가 수 년간 가르쳐본 결과 회귀분석은 순서를 바꾸는 것이 더 효과적이라는 것을 알게 되었습니다. 그래서 회귀분석의 기본을 이해했다면 바로 회귀분석의 결과표를 해석해보도록 하겠습니다. 다소 의아스러울 수 있겠지만 믿고 따라와 주길 바랍니다.\n\n2.2.1 회귀분석의 예제 데이터와 연구가설\n먼저 우리가 분석할 데이터와 회귀분석으로 우리가 기대하는 나름의 연구가설을 설명하겠습니다.\n\n데이터와 변수\n\nData: House sales price in Kings County, USA (다운로드)\n종속변수: price (매매가격)\n독립변수: sqft_living (거실크기-단위:\\(feet^2\\))\n\n연구가설\n\n거실의 크기가 클 수록 매매 가격이 비쌀 것이다.\n논리적 배경: 거실의 크기가 크다는 것은 일반적으로 집의 규모가 크다는 의미일 것이기 때문에\n\n인과관계의 예측:\n\n독립변수가 종속변수에 정(+)의 영향을 미칠 것이다\n원인: 거실의 크기\n결과: 매매 가격\n\n\n사실 연구가설이라고 하기에는 사회과학적 측면에서 보자면 이론이 없고 논리가 다소 빈약해 보이는 것이 사실입니다. 여기에 너무 집착하지 말고 일단 회귀분석 결과표를 이해하고 해석하는 것에 주안점을 두고 보도록 합시다.\n\n\n2.2.2 회귀분석 결과표의 해석\n\n\n\n\n\n\nFigure 2.5: 회귀분석결과표\n\n\n\nFigure 2.5 의 좌측이 Jamovi 결과이고 우측이 SPSS 결과입니다. 결과 자체가 다르지 않고 소수점의 자리수 차이만 있습니다. 요즘은 그런 분들이 거의 없긴 합니다만, 가끔 SPSS 아니면 안된다는 분들이 있습니다. 혹은 다른 통계 프로그램은 틀렸다거나 결과가 다르다거나 이런 이야기 하시는데, 참으로 안타까울 뿐입니다.\n이제 Jamovi의 결과표를 이용해서 하나씩 설명하겠습니다.\n\n\n\n\n\n\nFigure 2.6: Jamovi 회귀분석 결과표\n\n\n\n첫번째 열에 있는 것은 Predictor라고 되어 있습니다. 독립변수를 Independent variable이라는 말 대신 Predictor라고도 합니다. 예측변수라고 할 수 있겠습니다. 그 아래에 독립변수의 변수명이 있습니다. 첫번째가 Intercept라고 되어 있는데 이는 영어로 상수라는 말인데 Constant와 같은 말입니다. 즉 회귀식의 상수라는 의미입니다. 그 아래에 sqft_living 이라는 독립변수의 변수명이 표시되어 있습니다.\n두번째 열에는 Estimate라고 되어 있는데 어떤 프로그램에서는 Coefficient 라고 되어 있기도 합니다. 회귀계수입니다. 회귀계수란 우리가 앞서 공부한 회귀식의 \\(a\\)와 \\(b\\)를 말합니다. 즉, 최소제곱법에 의해 수학적으로 계산된 회귀계수입니다. 위의 회귀계수를 이용해 회귀식을 다시 써보면 다음과 같습니다.\n\\[\\hat{y} = a + b\\bar{x} = -43581 + 281\\bar{x}\\]\n즉 절편(상수)이 -43581이고 기울기가 281이라는 의미입니다. 사실 위의 회귀분석 결과표에서 우리의 관심사는 기울기 281입니다. 왜냐하면 독립변수 sqft_living이 종속변수 price에 미치는 영향은 기울기 \\(b\\)인 281로 나타나기 때문입니다. 여기서 한 가지 중요한 사실은 회귀계수 중 기울기 281은 수학적 계산방법인 최소제곱법에 의해 계산된 숫자일 뿐 아직은 전혀 통계적인 의사결정을 할 수 없는 상황이라는 점입니다. 이게 무슨 뜻인지 잘 이해가 되시지 않겠지만 일단은 이정도만 이해하고 뒤에서 좀 더 자세하게 다루겠습니다.\n세번째 열의 SE는 Standard Error로 표준오차입니다. 표준오차는 표준편차와 비슷하지만 개념이 좀 다릅니다. 복잡한 이야기는 뒤에서 하기로 하고 일단 여기서는 이런게 있다는 것만 이해하고 넘어가도록 하겠습니다.\n네번째 열의 t는 t-value입니다. 갑자기 회귀분석에 왜 t-value가 등장하냐고 생각하실 수 있겠으나, 본질적으로 회귀분석의 각 변수의 유의성을 확인하는 통계적인 방법은 t-test입니다. 그래서 t-value가 나오는 것입니다. 이 부분도 뒤에서 좀 더 자세하게 다루겠습니다.\n마지막 열의 p는 당연히 p-value 즉 p값입니다. 이 p값은 각 변수 여기서는 절편인 intercept와 독립변수인 sqft_living이 유의한지 아닌지 알려주는 p-value입니다. 당연히 5%보다 작으면 유의하고 5%보다 크면 유의하지 않습니다. 계속 이야기 하지만 우리의 관심사는 독립변수 sqft_living이 유의한지 아닌지입니다. 보다 정확하게 말하자면 독립변수의 회귀계수인 기울기 281이 통계적으로 유의한지 아닌지를 여기서의 p-value가 알려주는 것입니다. 위의 결과표를 보면 독립변수 sqft_living 의 p-value는 &lt;.001 이라고 되어 있고 이는 p-value가 0.001보다 작다는 의미이므로 매우 유의한 결과를 보이고 있습니다.\n이제 이 회귀분석의 결과표와 그래프를 연결해서 이해해 보도록 합시다.\n\n\n\n\n\n\nFigure 2.7: 회귀분석 결과와 그래프\n\n\n\n\\[\\hat{y} = a + b\\bar{x} = -43581 + 281\\bar{x}\\]\n회귀분석 결과를 그래프로 그린 것이 Figure 2.7 의 우측 그래프입니다. 회귀식의 절편 -43581은 원래 회귀직선과 y축이 만나는 점인데, 그림상 y축의 아랫부분이 좀 생략이 되어 있어 잘 보이지는 않습니다만 그림의 붉은 점선이 가리키는 부분입니다. 사실 앞서 이야기 했듯이 이 절편은 종속변수 y의 평균값을 의미합니다. 여기서는 price라는 주택매매 가격의 평균인데 값이 좀 이상합니다. 음수가 나왔다는 것은 사실상 말도 안되는 것입니다. 이유는 간단합니다. 우리가 너무 단순한 회귀식을 사용하여 분석했기 때문에 현실을 제대로 반영하지 못한 것입니다. 혹은 우리의 회귀식 자체가 좀 문제가 있다는 의미이기도 합니다. 여기서는 단순화된 예제를 사용해 회귀분석 결과표를 이해하는 것이 목적이므로 이에 대해 깊게 이야기 하지는 않겠습니다.\n중요한 것은 바로 파란색 점선입니다. 회귀식의 기울기 \\(b\\)가 281이고 이 기울기가 우측의 그래프에서 우상향하는 모습으로 표현되어 있습니다. 제가 굳이 이렇게 회귀분석 결과와 그래프를 연결해서 보여주는 이유는 회귀분석에 대한 이해를 돕기 위함입니다. 무엇이든지 머릿속에서 이 그래프를 그릴 수 있다면 이해의 정도와 속도가 매우 깊고 빨라지기 때문입니다.\n다시 한 번 강조하지만, 우리가 회귀분석을 한다는 것은 위와 같은 회귀직선의 방정식을 얻는 것이고 이 방정식에서 두 개의 회귀계수(절편과 기울기)를 알아 내는 것이 최종적인 목적입니다. 더불어 이 두 회귀계수 중에서 기울기가 통계적으로 유의한지 확인하는 것이 최종적인 목적이 됩니다. 우리의 연구가설은 거실의 크기가 클 수록 매매가격이 비싸질 것이라는 것입니다. 결과적으로 우리의 회귀분석 결과표는 이러한 연구가설이 옳다는 것을 보여주었습니다.\n문제는 대부분의 경우 “유의하다”라는 말만 하고 끝난다는 것입니다.\n제가 학생들을 가르치면서 계속 강조하는 것이 바로 이 유의하다라는 말에서 끝나서는 안된다는 것입니다. 결과를 다시 한 번 살펴보면,\n\\[\\hat{y} = a + b\\bar{x} = -43581 + 281\\bar{x}\\]\n이 회귀직선에서 기울기 281은 통계적으로 유의하였고, 이 값이 의미하는 바는 거실의 크기가 1\\(feet^2\\) 증가할 때, 주택의 매매가격이 평균적으로 281 US dollar 증가한다는 것입니다. 이렇게 보다 자세하고 정확하게 의미를 짚어서 해석하는 것이 진정한 회귀분석의 목적입니다. 그러니 유의하다라는 것에 집착하고 거기서 끝내지 말기 바랍니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#회귀분석과-표준오차",
    "href": "chapter2.html#회귀분석과-표준오차",
    "title": "2  회귀분석",
    "section": "2.3 회귀분석과 표준오차",
    "text": "2.3 회귀분석과 표준오차\n\n2.3.1 표준오차란 무엇일까?\n이번에는 회귀분석과 표준오차에 대해 알아보겠습니다. 앞 시간에 표준오차는 jamovi의 결과표에서 SE라는 것으로 표현되었습니다. 여기서 SE란 Standard Error의 약자입니다. 그렇다면 이 표준오차가 무엇을 의미하는 것일까요? 여러분들이 통계 교과서를 찾아보거나 인터넷을 검색해 보면 뭔가 알듯 말듯한 말로 표현되어 있을 것입니다. 계속 이야기 하지만, 여러분들이 통계전공을 할 것이 아니라면 일단 이런 복잡한 설명은 잠시 접어두고, 그림으로 이해해 보는 것이 보다 좋을 것 같습니다. 아래의 그림을 한 번 살펴봅시다.\n\n\n\n\n\n\nFigure 2.8: 두 회귀분석 결과의 그래프\n\n\n\n우리가 두 개의 데이터를 가지고 있고, 이 두 개의 데이터로 간단한 회귀분석을 진행했다고 가정합니다. 그리고나서 우리는 두 개의 데이터의 회귀분석 결과를 위와 같이 그림으로 표현하였습니다.\n위의 결과그래프 우측 상단에 각각의 최종적인 회귀식이 표현되어 있습니다. 공교롭게도 두 데이터의 회귀분석 결과 회귀식은 동일하게 나타났습니다.\n\\[ y = 0.5 + 2.4x\\]\n무슨 뜻일까요? \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가한다는 의미입니다. 그렇다면 다시 위의 그림을 살펴봅시다. 회귀식은 동일하지만, 데이터가 상당히 차이가 있어보입니다. 좌측의 데이터는 회귀식을 중심으로 데이터의 점들이 촘촘하게 잘 모여있는 것으로 보이지민, 우측의 데이터는 회귀식을 중심으로 데이터의 점들이 넓게 퍼져있습니다.\n이제 여기서부터 본격적인 회귀분석의 통계가 시작됩니다. 앞에서도 이야기 했지만, 위의 회귀분석식의 회귀계수는 최소제곱법에 의해 수리적으로 계산되어 나온 것이므로 이는 수학적 해(결과)입니다. 위의 두 데이터를 이용한 회귀분석의 결과 \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가한다는 것을 우리는 알았습니다. 문제는 두 데이터가 분명히 차이가 있어 보인다는 것이지요.\n이제 우리는 다시 우리가 이 공부를 시작한 제일 처음으로 돌아가야 합니다.\n처음 통계를 이야기 할 때, 제가 한 말이 기억이 나시나요? 통계적 사고방식이란 무엇이라고 했나요? 기억이 나지 않으시는 분들을 위해 간단하게 말하자면, 통계란 이 사건이 우연히 발생하지 않았을까? 라는 질문에서 시작한다고 이야기 했습니다. 회귀방정식의 결과를 봤을 때, \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가한다고 하는데, 이 2.4의 증가가 우연히 발생하지는 않았을까? 라고 질문하는 것이 바로 통계의 시작이라는 것입니다.\n아마도, 통계에 익숙하지 않은 분들이라면 이 말 자체가 이해가 되지 않을 것입니다. 여기서 우리는 수학적 해(답)와 통계적 의사결정은 다르다는 것을 이해해야 합니다. 수학적으로는 최소제곱법이 오차의 제곱 합이 최소가 되는 회귀방정식을 구해줄뿐, 이 회귀식의 회귀계수가 우연인지 아닌지 (유의한지 아닌지) 알려주지 않는다는 것이 핵심입니다.\n그렇다면, 우리는 회귀계수 2.4가 우연인지 아닌지 혹은 유의한지 아닌지 어떻게 판단해야 할까요?\n앞의 내용을 충실히 이해하고 여기까지 오신 분들이라면 아마도 비교대상이 필요하다는 것을 눈치 채셨을 겁니다.\n\n\n\n\n\n\nFigure 2.9: 두 회귀분석 결과의 그래프 2\n\n\n\nFigure 2.9 을 보시면 둘 다 분명히 \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가한다는 것을 알 수 있습니다. 문제는 확률적으로 누가 더 \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가할까? 라는 것이지요. 직관적으로 봐도 좌측의 경우가 우측보다는 \\(x\\)가 1 증가할 때, \\(y\\)는 2.4 증가할 가능성(확률)이 높아 보입니다.\n\n\n2.3.2 표준오차의 정의\n여기서 표준오차에 대해 보다 자세히 알아보겠습니다. 통계책을 살펴보면, 표준오차란? - 우리는 무엇을 하든지 대부분 모집단이 아닌 표본으로 통계분석을 하게 되는데, - 우리는 우리가 가진 표본이 얼마나 모집단에 가까운지 아닌지를 판단해야 합니다. - 즉, 모집단의 평균을 평균의 참값이라고 보고, - 표본의 평균값이 모집단의 평균값과 얼마나 가까운지 혹은 멀리 있는지를 계산하게 되는데, - 이론적으로는 같은 모집단에서 적합한 방법으로 표본을 뽑아도 표본의 평균값은 매번 조금씩 다를 수 밖에 없습니다. - 그러므로, 여러번 표본을 뽑아서 표본들의 평균값을 구하고, 이를 이용해 표본들의 평균값의 표준편차를 구합니다. - 이때, 이 표준편차를 표준오차라고 부르는데, - 이 표준오차가 작으면 표본의 평균값이 모집단의 평균값인 참값에 더 가깝다는 것이고, 표준오차가 크면 이 참값에서 더 멀다는 뜻이 됩니다.\n결론적으로 표준오차가 크다는 것은 표본의 평균값이 참값으로부터 멀어져 있다고 보는 것이지요. 그렇다면 이 개념을 위의 그림에 다시 대입해 보면 이렇게 볼 수 있습니다.\n\n\n\n\n\n\nFigure 2.10: 두 회귀분석 결과의 그래프 3\n\n\n\nFigure 2.10 의 그림과 회귀분석 결과표를 비교해 보면, 좌측의 경우 변수 \\(x\\)의 표준오차가 0.82인 반면, 우측의 경우 변수 \\(x\\)의 표준오차가 1.9로 거의 두 배인 것을 볼 수 있습니다. 즉 표준오차가 크므로 회귀계수 2.4가 유의할 가능성이 좌측은 높지만 우측은 낮다고 볼 수 있습니다. 물론 정확한 것은 p-value를 보아야 하지만 말입니다.\n정리해 보면 다음과 같습니다.\n\n회귀계수는 최소제곱법으로 구해진다\n\n그러나 그렇게 계산된 회귀계수가 우연인지 아닌지는 모른다\n그래서 이 회귀계수가 우연일 확률을 알기 위해 표준오차를 사용한다\n\n표준오차가 작으면 회귀계수가 우연일 확률이 낮다\n\n표준오차가 작다는 것은 데이터가 회귀직선에 가까이 모여 있다는 의미이고,\n\n표준오차가 크면 회귀계수가 우연일 확률이 높다\n\n표준오차가 크다는 것은 데이터가 회귀직선에서 멀리 퍼져있다는 의미이다\n\n그렇다면 이 확률(p-value)을 어떻게 계산할까?\n\n정답은 t-test\n\n\n그렇다면 이제 회귀분석에서 t-test를 공부해보도록 합시다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#회귀분석과-t-test",
    "href": "chapter2.html#회귀분석과-t-test",
    "title": "2  회귀분석",
    "section": "2.4 회귀분석과 t-test",
    "text": "2.4 회귀분석과 t-test\n\n2.4.1 왜 t-test일까?\n지난 시간에 공부한 내용을 정리해보면 다음과 같습니다.\n\n회귀계수는 최소제곱법으로 구해진다\n\n그러나, 그렇게 계산된 회귀계수가 우연인지 아닌지는 모른다\n그래서 이 회귀계수가 우연일 확률을 알기 위해 표준오차를 사용한다\n\n표준오차가 작으면 회귀계수가 우연일 확률이 낮다\n\n표준오차가 작다는 것은 데이터가 회귀직선에 가까이 퍼져있다는 의미이고,\n\n표준오차가 크면 회귀계수가 우연일 확률이 크다\n\n표준오차가 크다는 것은 데이터가 회귀직선에서 멀리 퍼져있다는 의미인데,\n\n그렇다면 이 확률을 어떻게 계산할까?\n\n바로 t-test를 이용한다\n\n\n이렇게 됩니다.\n앞의 두 경우를 다시 한 번 살펴보면,\n\n\n\n\n\n\nFigure 2.11: 회귀분석과 t-test\n\n\n\n그러면, 먼저 좌측의 경우를 좀 더 자세하게 살펴보도록 하겠습니다.\n\n\n\n\n\n\nFigure 2.12: 표준오차가 작은 경우\n\n\n\n그림과 함께 t-test값을 계산하는 방법을 순서대로 보겠습니다. 사실상 순서랄 것도 없습니다. 우측 아래의 회귀분석 결과표에 나오는 회귀계수를 표준오차로 나눈 것이 바로 t-value 입니다. 그리고 이 t-value를 t-distribution을 이용해 p-value를 구하는 것입니다. 이때의 자유도(df=degree of freedom)은 1입니다. 왜냐하면, 변수 1개만 사용되어 그렇습니다. 자세한 내용을 알고 싶다면 통계학 전공을 하시길 바라며, mathematical statistics와 같은 책을 보시면 좀 더 도움이 되실 것입니다. 다시 위의 Figure 2.12 를 보면 결국 t-value값은 회귀계수 \\(\\beta\\)를 표준오차 (SE=Standard Error)로 나눈 것입니다. 우리가 앞에서 공부한 t-value를 구하는 방법과 기본적으로 동일합니다. 여전히 왜 이렇게 하느냐고 물으실 수 있는데, 다시 한 번 강조하자면, 위의 회귀계수 \\(\\beta\\)는 최소제곱법을 통해 계산된 수리적 해답입니다. 우리가 중고등학교에서 배운 복잡한 방정식을 푸는 것과 같은 것입니다. 여기까지는 수학의 영역이라고 할 수 있습니다. 이제 통계의 영역에 들어오고자 한다면 우리는 이 회귀계수 \\(\\beta\\) 즉 2.4라는 값이 우연히 나온 것인지 아닌지 궁금해 해야만 합니다. 이 회귀계수가 만약 우연히 나온 것이라면 수학적으로는 2.4이지만 통계적으로는 아무 의미없는 0이라고 보아야 하기 때문입니다. 만약 통계적으로 회귀계수 \\(\\beta = 0\\)가 맞다면, 위의 경우 독립변수 \\(x\\)가 1 증가한다고 해도 통계적으로는 종속변수 \\(Y\\)가 0 증가하는 것이라고 보아야 합니다. 종속변수가 0 증가한다는 것은 결국 아무런 증감이 없다는 의미가 됩니다.\n여기서 우리는 다시 앞에서 공부한 통계적 가설로 돌아가 볼 수 있습니다. 즉, 회귀계수 \\(\\beta\\)에 대한 통계적 가설은 다음과 같습니다.\n\\[H_{0}: \\beta = 0\\] \\[H_{a}: \\beta \\ne 0\\]\n만약 귀무가설(\\(H_{0}\\))이 채택된다면, 위의 회귀계수 \\(/beta\\)는 유의하지 않습니다. 반대로 대립가설(\\(H_{a}\\))이 채택된다면 회귀계수 \\(\\beta\\)는 통계적으로 유의합니다. 우리가 보고 있는 표준오차가 작은 경우(Figure 2.12)는 p-value가 0.05보다 작아 대립가설이 채택된 경우입니다. 이 경우 연구가설이 채택되었다고 할 수 있습니다. 다시 한 번 말하자면, 연구가설이란 통계적 가설의 대립가설을 말로 풀어 쓴 것입니다.\n그럼 이제 두 번째 표준오차가 큰 경우를 보도록 하겠습니다.\n\n\n\n\n\n\nFigure 2.13: 표준오차가 큰 경우\n\n\n\n위의 Figure 2.13 를 보면 t-value값 1.26은 회귀계수 \\(\\beta\\) (2.4)를 표준오차(SE=Standard Error) 1.9로 나눈 것이므로 우리는 이 회귀계수 \\(\\beta\\) 즉 2.4라는 값이 우연히 나온 것인지 아닌지 궁금합니다. 이 회귀계수가 만약 우연히 나온 것이라면 수학적으로는 2.4이지만 통계적으로는 아무 의미없는 0이라고 보아야 합니다. 여기서는 이미 p-value가 0.21로 0.05 (5%)보다 크기 때문에 우리는 이 경우 회귀계수 2.4가 유의하지 않다고 결론 내립니다. 회귀계수가 유의하지 않다는 것은 수학적으로 회귀계수는 2.4이지만 통계적으로는 0이라고 보는 것입니다. 즉, 독립변수는 종속변수에 아무런 유의미한 영향이 없는 것입니다. 이는 아래에서 다시 한 번 살펴보겠습니다.\n아마도 여전히 많은 분들이 회귀계수를 t-test로 검정하는 것에 대한 의문 내지는 이상함을 느끼실 수 있습니다. 그렇다면 이제 앞에서 공부한 t-test를 회귀분석으로 바꿔서 분석하여 이 두 분석방법을 비교함으로써 이 둘이 근본적으로 동일한 것이라는 사실을 한 번 살펴보겠습니다.\n\n\n2.4.2 회귀분석과 t-test의 비교\n\n\n\n\n\n\nFigure 2.14: t-test의 경우\n\n\n\nFigure 2.14 을 보면 두 집단의 평균값을 비교하고 할 때, 우리는 일반적으로 t-test를 사용합니다. 이 때의 t-value를 구하는 방법을 단순화 하면 아래와 같습니다.\n\\[t-value = \\frac{평균_{집단1}-평균_{집단2}}{표준오차}\\]\n두 집단의 평균값의 차를 분자에 놓고 이 값이 우리의 주된 관심사가 됩니다. 문제는 이 차이값이 얼마나 커야 통계적으로 큰 것인지 혹은 얼마나 작아야 통계적으로 작은 것인지 알 수 없다는 것입니다. 그래서 비교대상으로 표준오차를 가져와서 분모에 놓고 나눠줍니다. 이렇게 해서 비율의 값이 나오면 이 값이 바로 t-value이고 이 값을 t-distribution을 이용해 p-value를 구하는 방식입니다.\n그렇다면 이제 이 예제를 회귀분석으로 바꿔보겠습니다.\n\n\n\n\n\n\nFigure 2.15: 회귀분석의 경우\n\n\n\n동일한 데이터를 회귀분석에 맞게 그림을 수정한 것이 Figure 2.15 입니다. 독립변수를 단순히 두 개의 집단이 아니라 하나를 0으로 코딩하고 다른 한 집단을 1로 코딩하는 더미변수 방식을 사용하였습니다. 더미변수에 대해서는 이후에 좀 더 자세하게 알아보겠습니다. 이렇게 했을 때, 회귀분석을 하면 이 회귀식은 두 집단의 평균값을 지나가는 직선이 됩니다. 앞에서도 이야기 했지만 회귀분석이란 평균값으로의 회귀를 의미합니다. 그러므로 두 집단의 평균값을 지나가는 직선의 방정식이 바로 회귀식이 됩니다.\n이 회귀식을 \\(y = a + bx\\)라고 하면 기울기 \\(b\\)에 대한 t-value는 다음과 같이 유도할 수 있습니다. 먼저 앞에서 이야기한 것 처럼 기울기 \\(b\\)는 y값의 변화량을 x값의 변화량으로 나눈 것인데 이를 Figure 2.15 에 적용하면,\n\\[\\beta = \\frac{평균_{집단1} - 평균_{집단2}}{1 - 0}\\]\n여기서 두 집단의 평균값의 순서를 바꿔서 해도 큰 차이는 없습니다. 단지 양수이냐 음수이냐일 뿐인데 이또한 결국은 같은 값을 나타내게 되므로 위의 기울기를 기울기 \\(\\beta\\)에 대한 t-value로 바꿔보면,\n\\[t-value = \\frac{\\beta}{표준오차} = \\frac{\\frac{평균_{집단1} - 평균_{집단2}}{1 - 0}}{표준오차} = \\frac{평균_{집단1} - 평균_{집단2}}{표준오차}\\]\n이렇게 정리가 됩니다. 결론적으로 두 t-value는 동일한 값을 가지게 됩니다. 다시 말해, t-test로 두 집단의 평균값이 같은지 다른지 알아보는 방법과 이 데이터를 회귀분석하여 두 집단의 평균값을 지나는 회귀직선 \\(\\beta\\)가 유의한지 아닌지 알아보는 방법은 동일한 방법이라는 의미가 됩니다.\n\n\n2.4.3 회귀분석에서 주의할 점\n이제 회귀분석에서 주의할 필요가 있는 내용을 몇 가지만 살펴보겠습니다. 먼저 우리가 앞에서 기울기가 0인 경우에 대해 잠시 이야기를 했습니다. 회귀계수 \\(\\beta\\)의 기울기가 0인 경우를 그림으로 그려보면 어떤 경우가 될까요?\n\n\n\n\n\n\nFigure 2.16: 기울기가 0인 경우\n\n\n\n이렇게 되면, 독립변수가 아무리 증가하거나 감소해도 종속변수에는 아무런 영향이 없습니다. 그러므로 독립변수는 종속변수에 어떠한 의미있는 영향력이 없기 때문에 우리는 유의하지 않다라고 결론 내립니다. 이런 경우는 표준오차가 아무리 작아도 아무런 의미가 없습니다. 왜냐하면 t-value는 회귀계수 \\(\\beta\\)를 표준오차로 나누는 것인데 시작부터 회귀계수가 0이라면 아무리 작은 표준오차로 나누어도 어차피 0이기 때문입니다.\n그렇다면, 다음의 두 경우는 어떨까요?\n\n\n\n\n\n\nFigure 2.17: Non-linear 관계인 경우\n\n\n\n앞에서 그런 이야기를 한 적이 있습니다. 기본적으로 우리가 현재 공부하는 기초통계학은 대부분의 경우 Linear relationship을 전제하고 있다고요. Linear란 단어는 Line이라는 명사의 형용사형입니다. 즉, 선형의 라는 뜻이지요. 따라서 우리가 하고 있는 회귀분석 또한 선형관계를 전제로 합니다. 여기서 선형관계란 독립변수와 종속변수 사이의 관계를 의미합니다. 또한 여기서 말하는 선형이란 직선을 말합니다. 즉 독립변수와 종속변수의 관계가 서로 직선적인 관계이어야 한다는 것입니다.\n문제는 위의 Figure 2.17 처럼 독립변수 \\(x\\)가 증가할 때, 종속변수 \\(y\\)가 증가하다 감소하면 이는 직선이 아닌 곡선의 관계가 되므로 비선형관계 즉 non-linear relationship이 됩니다. 이렇게 되면, 우리가 공부한 회귀분석은 아무런 소용이 없습니다. 위에서 보듯 회귀분석을 해보면 결과가 기울기 \\(\\beta\\)는 0이라고 나타납니다. 문제는 이 기울기 값 자체가 전혀 신뢰할 수 없다는 데에 있습니다. 또한 두번째 그림처럼 독립변수와 종속변수의 관계를 산포도로 그렸을 때, 공 모양으로 둥글게 나오면, 이 또한 둘 사이에 아무런 관계가 없다는 의미가 됩니다. 왜냐하면 독립변수가 증가하건 감소하건 종속변수의 방향을 예측할 수 없기 때문입니다.\n정리를 해 보면,\n\n만약 데이터가\n\n곡선 형태로 되어 있다면 기울기는 0 이다\n원(구) 형태로 되어 있다면 기울기는 0 이다\n직선의 형태로 되어 있지 않다면 분석할 수 없다\n\n회귀분석 전에 산포도(scatter plot)을 찍어 보아야 한다\n\n직선형태의 데이터 분포가 나타나지 않는 경우 다른 방법을 찾아야 하는데,\n왜냐하면 결국 회귀분석이란 \\(y = a + bx\\) 의 직선의 방정식을 구하는 것이므로,\n\n회귀계수의 기울기는 결국 t-test의 평균값 차이와 동일한 개념이 되어\n\nt-test를 이용해 유의성을 검정한다\n\n\n마지막으로 회귀분석과 t-test의 통계적 가설을 비교해 보면,\n\n\n\n\n\n\nFigure 2.18: 통계적 가설의 비교\n\n\n\n위와 같이 됩니다.\n이제 여러분들은 회귀분석의 모든 기본적인 내용을 마스터했습니다. 이제 회귀분석과 관련된 부가적인 내용들에 대해 하나씩 알아보겠습니다. 사실 회귀분석은 많이 사용되는 만큼 부가내용이 많습니다. 그러니 하나씩 차근차근 따라 오시길 바랍니다.\n수고 많으셨습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#r2를-어떻게-해석해야-할까",
    "href": "chapter2.html#r2를-어떻게-해석해야-할까",
    "title": "2  회귀분석",
    "section": "2.5 R2를 어떻게 해석해야 할까?",
    "text": "2.5 R2를 어떻게 해석해야 할까?\n\n2.5.1 통계의 의미와 R2\n이 강의를 시작할 때, 제가 통계란 무엇이라고 했는지 기억나시나요?\n저는 통계란 분산의 마법이라고 표현합니다. 물론 아직도 이 표현을 무슨 미사어구 정도로 생각하시는 분들도 있겠지만, 통계를 공부하면 할 수록 이 말이 사실이라는 점을 알게되실 겁니다. 앞의 t-test부터 ANOVA 그리고 회귀분석에 이르기까지 결국 모든 것이 분산과 관련이 있는 것들이었습니다.\n이제 R2로 돌아가 봅시다. 회귀분석을 약간이라도 아는 분들은 아마도 이 R2에 대해서 들어보셨을 겁니다. 어느 정도 통계지식이 있는 분들이라면 더더욱 잘 아시리라 생각됩니다. 그렇다면 이 R2는 대체 무엇일까요? 일단 답을 알아보기 전에 회귀분석이 무엇인지 다시 한 번 생각해 보아야 합니다.\n회귀분석이란 종속변수와 독립변수 사이의 인과관계를 논리적/이론적으로 전제하고 톡립변수를 이용해 종속변수를 설명하려는 시도입니다. 이때 회귀계수를 해석할 때는 \\(x\\)가 1 증가할 때, \\(y\\)가 \\(\\beta\\)만큼 증가한다고 해석합니다. 여기서 회귀분석이란 결론적으로는 종속변수 \\(y\\)의 분산을 독립변수 \\(x\\)로 설명하려는 노력이다 라고 표현할 수 있겠습니다. 그렇다면 도대체 독립변수로 종속변수의 무엇을 설명하려는 것일까요? 그것은 바로 종속변수의 분산을 설명하는 것이 회귀분석의 목적이라는 것입니다.\n그러므로, 회귀분석을 포함한 통계적 분석이란 이론적 논리적 근거를 기반으로 종속변수를 설명할 수 있는 모델을 만드는데, 이 모델이란 바로 독립변수를 설정하는 것을 의미합니다. 여기서 설정된 모델 즉 독립변수를 이용해서 종속변수의 분산을 설명하는 것이 바로 통계적 분석이고, 만약 우리가 만들 모델이 큰 문제가 없다면, 즉 종속변수의 분산을 충분히 잘 설명했다면, 우리의 모델로 설명하고 남은 종속변수의 분산은 단지 random한 분산일 뿐입니다. 즉, 큰 의미가 없는 분산이라는 의미가 됩니다.\n여기서 R2의 의미가 발견됩니다. R2란 종속변수 전체의 분산중에서 모델에 의해 설명된 분산의 비율을 의미합니다. 아래의 그림을 보면 좀 더 이해가 쉬울 수 있습니다.\n\n\n\n\n\n\nFigure 2.19: R2의 의미\n\n\n\n그렇다면 앞에서 본 두 개의 표준오차가 다른 경우를 다시 보고 이야히 해 봅시다.\n\n\n\n\n\n\nFigure 2.20: 서로 다른 분산설명력\n\n\n\nFigure 2.20 의 좌측의 경우는 분산 설명력이 높은 경우이고, 우측의 경우는 분산 설명력이 낮은 경우입니다. 즉, 회귀직선을 중심으로 데이터가 모여 있다면 분산 설명력 즉 R2가 높은 경우이고, 회귀직선을 중심으로 데이터가 넓게 퍼져 있다면 분산 설명력 즉 R2가 낮은 경우입니다.\n\n\n2.5.2 높은 분산설명력과 낮은 분산설명력\n그럼 이제 하나씩 살펴 보겠습니다.\n\n\n\n\n\n\nFigure 2.21: 분산설명력이 높은 경우\n\n\n\nFigure 2.21 은 분산 설명력이 높은 경우입니다. R2의 계산법을 보면,\n\\[R^{2} = 1 - \\frac{SSE}{SST}\\]\n여기서 SSE는 Sum of Squared Error의 약자이고 SST는 Sum of Squared Total의 약자입니다. SST는 종속변수의 전체분산을 의미하고 SSE는 설명되지 않은 random error의 분산을 의미합니다. 이 비율을 1에서 빼기 때문에 R2는 설명된 분산의 비율을 의미 합니다. 좀 더 자세하게 들여다 보면,\n\\[SST = \\sum(y_i -\\bar{y_i})^2\\]\n여기서 SST는 일반적으로 분산을 계산하는 것을 생각하면 동일합니다. 일반적인 분산의 계산법의 분자부분이 SST입니다. 위의 식을 보면 각 데이터의 관찰값에서 평균값을 뺀 것으로 제곱하여 합하는 것입니다. 이는 분산 계산시 분자부분입니다. 이것이 바로 total variance라고 보시면 되고 SST입니다.\n\\[SSE = \\sum(y_i -\\hat{y_i})^2\\]\n반면에 설명되지 않은 분산은 error라고 할 수 있는 \\(y_i -\\hat{y_i}\\)입니다. 여기서 \\(\\hat{y_i}\\)은 회귀분석에 의해 구해진 회귀직선입니다. 따라서 SSE는 데이터의 관찰값과 회귀직선 간의 차이의 제곱합입니다.\n다시 Figure 2.21 로 돌아가 보면 결국 이 경우의 R2는 0.7로 꽤 높은 편입니다. R2는 0부터 1까지의 값만 가지게 됩니다. R2가 0이라는 의미는 독립변수가 전혀 종속변수의 분산을 설명하지 못했다는 의미이고, R2가 1이라는 의미는 독립변수가 종속변수를 완벽하게 설명했다는 의미입니다. 이런 경우 데이터의 모든 점들이 회귀식 위에 올라가 있습니다.\n그렇다면, 분산의 설명력이 낮은 경우는 어떨까요?\n\n\n\n\n\n\nFigure 2.22: 분산설명력이 낮은 경우\n\n\n\nFigure 2.22 에서 보듯, R2는 0.13에 불과합니다.\n다시 한 번, 정리해 보자면, R2는 모델의 분산 설명력이고, 이는 우리가 만들 모델(독립변수)이 우리의 종속변수의 분산을 얼마나 잘 설명했는지를 의미합니다.\n\n\n2.5.3 애증의 R2\n그렇다면, R2가 높은 것이 무조건 좋을까요?\n불과 10여년 전까지만 해도, 이 문제로 교수님들 사이에서도 말이 좀 있었습니다. 과거에는 이 R2를 너무 과하게 중요시 하는 문화가 일부 있었기 때문입니다. 물론 그렇다고 R2가 무시되어도 된다는 말은 아닙니다. R2가 나름의 의미를 분명하게 가지고 있긴 하나, R2 하나 때문에 연구나 분석 전체가 무너지는 일은 그다지 좋지 않다는 의미입니다. 연구나 분석이 문제가 있다면, R2 하나 때문이 아니라 이미 연구의 시작부터 논리적 혹은 이론적으로 문제가 많았을 것이고 그러한 결과가 단순히 R2에 반영될 수는 있어도, 만약 다른 문제가 없는데 단순히 R2가 낮다는 이유만으로 연구나 분석 자체를 부정하는 것은 위험하다는 의미입니다.\n뿐만 아니라 단순히 R2가 높으냐 낮으냐 보다 R2를 보기 전에 회귀분석 자체가 건강한지 아닌지 확인하는 작업이 더 중요할 수 있습니다. 예를 들어 R2를 확인하기 전에 잔차도(residual plot)을 확인하여 잔차(residual)가 랜덤하게 분포하느지 확인해야 합니다. 여기서 잔차란 위의 \\(y_i -\\hat{y_i}\\)을 의미합니다.\n또한, 단순한 , R2가 위험한 또 다른 이유는 다음과 같습니다. 만약 R2값을 올리는 것만이 회귀분석의 유일한 목적이라면, 우리는 가능한 사용할 수 있는 모든 독립변수를 전부 다 넣어서 모델을 만들면 됩니다. 이러한 경우를 우리는 Dumping이라고 합니다. 독립변수를 가능한 한 많이 Dump 하면 아주 약간의 R2를 증가시킬 수 있기 때문입니다. 물론 이런 경우 R2가 많이 올라가지는 못하고 0.000001 이런식으로 증가되기는 합니다. 문제는 앞서 잠깐 이야기 했듯이 독립변수의 추가는 자유도(df=degree of freedom)의 손실을 의미합니다. 독립변수 1개는 자유도 1의 손실입니다. 따라서 무조건 적인 독립변수의 무한 투입은 상당한 손실일 뿐입니다. 더불어 이렇게 투입된 변수는 그 변수 하나 하나가 유의하지 않습니다.\n마지막으로 최근 빅데이터로 인해 많이 알려진 과적합(overfitting)문제입니다. 사실 이 과적합 문제는 데이터가 많고 적음의 문제는 아닙니다. 조금만 어려운 중급정도의 회귀분석을 해보면 over-identification이라는 용어가 등장하는데 이는 우리가 빅데이터 분석에서 말하는 과적합(overfitting)과 유사한 개념입니다. 쉽게 말해, 높은 R2를 위해 독립변수를 과하게 투입하거나 혹은 현재 분석하는 데이터에서만 유의할 만한 독립변수 중심으로 모델을 구성할 경우 과적합의 문제가 발생합니다. 여기서 과적합이란 현재 분석한 해당 데이터에 대해서는 높은 R2를 보이지만, 다시 데이터를 수집하여 동일한 모델을 적용할 경우 R2가 매우 낮게 나오게 되는 경우를 의미합니다. 통계적 분석에 경험이 없으신 분들의 경우 이것이 왜 문제냐고 생각하실 수 있습니다.\n문제는 우리가 데이터 분석을 하고 통계적 방법을 적용하는 목적이 현재 가지고 있는 데이터를 잘 설명하는 것이 궁극적인 목표가 아니라는 점입니다. 특히 사회과학은 이론과 논리 그리고 기존 연구를 바탕으로 가설을 세워 이 가설을 검정할 만한 데이터를 수집하여 이를 통계적 방법으로 검정하는 과정르 거쳐 가설의 채택여부를 결정하고, 최종적으로 채택된 가설은 본 연구 혹은 현재의 데이터 뿐만 아니라 다른 데이터와 다른 경우에도 채택될 수 있는 일반화(generalization)를 궁극적인 목표로 하기 때문입니다.\n현대의 많은 사회과학 연구나 분석이 이러한 일반화(generalization) 보다는 현재의 데이터를 이용해 현재의 연구를 보다 돋보이게 하려는 시도가 많다보니, 학계에 출판된 (published) 연구들 조차 재확인(replication)이 되지 않는 경우가 많습니다. 이는 연구자의 실수이든 의도된 결과이든 상당한 문제가 될 수 있으므로 매우 주의해야 할 부분입니다.\n\n\n2.5.4 회귀분석과 잔차도\n그렇다면 여기서 잔차도의 예를 두 개 보겠습니다.\n\n\n\n\n\n\nFigure 2.23: 잔차도의 예\n\n\n\nFigure 2.23 의 좌측은 무난한 수준의 잔차도입니다. 완벽한 random이라고 말하긴 좀 애매하지만 큰 무리는 없어보입니다. 문제는 우측과 같은 경우입니다. 우측은 제가 가지고 분석했던 실제 데이터입니다. 잔차도는 random하게 점들이 찍혀야 하는데 우측의 잔차도는 명확한 패턴이 보입니다. x축의 크기가 커질수록 y축을 중심으로 데이터가 확장하는 패턴을 가지고 점들이 퍼져 있는 것을 확인할 수 있습니다. 보통 매출이나 이익액 등의 변수를 사용하면 흔하게 발생하는 문제입니다.\n다음은 앞서 R2의 문제점에 대한 대안입니다. 앞서 독립변수를 무한대로 dumping하면 아주 근소하지만 R2는 증가한다고 이야기 했습니다. 문제는 이렇게 독립변수를 증가시킬 때마다 자유도를 1씩 잃는 다는 것이 문제입니다. 따라서 이에 대한 보정이 필요합니다. 여기서 보정이란, 추가된 독립변수가 자유도 1을 잃고도 충분히 분산을 설명했는지 여부를 의미합니다. 결론적으로 손실인 자유도를 감안한 R2값이 필요하다는 의미이지요. 이것이 바로 수정된 R2 (adj. R2)입니다. 일반적으로는 논문을 작성할 때 이 두 값 (R2와 adj. R2)을 모두 리포트 합니다. 만약 두 값의 크기가 심하게 다르다면 이는 의미 없는 독립변수를 너무 많이 dump했다는 뜻이 되므로 투입된 독립변수에 대한 재고가 필요합니다.\n마지막으로 과적합(overfitting)에 대해 살펴보자면, 일반적으로 우리는 표본을 수집해서 데이터를 분석합니다. 이 이야기는 대부분의 경우 데이터 자체가 그다지 많지 않다는 의미이기도 하고 이는 현재의 데이터에서 높은 R2를 보인 모델이 다른 데이터에서는 전혀 제대로 작동하지 않을 수 있다는 의미입니다. 사실 그래서 지금의 빅데이터 분석에서는 자연스럽게 데이터를 Testing set와 validation set으로 나누어 Testing set으로는 모델을 만들어 테스트하고, 여기서 완성된 모델을 다시 validation set으로 검증하는 과정을 거칩니다. 문제는 단순 설문조사 등으로 수집한 데이터의 경우 이렇게 두 개의 세트로 나눠서 분석을 진행할 만큼 데이터가 크지 않은 경우가 많다는 것입니다. 물론 이 문제를 해결하기 위한 별도의 방법들이 또한 요즘에는 만들어지고 있지만 기초 통계를 배우는 과정에서 말하기는 좀 어렵긴 합니다. 어쨋거나 너무 과도한 R2 집착으로 인한 과적합은 부정적인 결과를 가져온다는 것을 기억하는 것은 중요합니다.\n오늘의 내용을 정리해 보자면,\n\nR2는 애증의 대상이라는 것입니다\n\nR2 는 모델(독립변수)이 종속변수의 분산을 얼마나 잘 설명했는지를 의미하고,\nR2 가 높다는 것은 모델의 설명력이 높으므로 나름 좋은 의미입니다\n그러나, 높은 R2가 모델의 정당성을 모두 해결해주지는 않습니다\n\nR2의 단점은,\n\nR2를 높이는 것이 단일한 목적일 경우 무한히 많은 독립변수를 추가하면 되지만,\n독립변수의 추가는 결국 비용이고 손해라는 점이 중요합니다 (자유도 1 손실)\n그러므로 adj. R2(수정된 R2)를 같이 사용하는 것이 좋습니다\n\n마지막으로, R2 보다 중요한 것은\n\n모델에 사용된 독립변수의 논리적/이론적 근거가 보다 중요하다는 것입니다\n일단 넣어보고 R2만 높아지면 된다는 생각은 매우 위험합니다\n\n\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#회귀분석의-표준화계수",
    "href": "chapter2.html#회귀분석의-표준화계수",
    "title": "2  회귀분석",
    "section": "2.6 회귀분석의 표준화계수",
    "text": "2.6 회귀분석의 표준화계수\n\n2.6.1 표준화계수를 알고 사용할까?\n제가 한국에 와서 가장 놀란 것 중의 하나가 바로 표준화계수입니다. 논문심사를 들어가 보면 모든 논문에 표준화계수가 꼭 들어가고 만약 들어가 있지 않으면 무슨 큰 일이나 난 것처럼 심사위원들이 학생을 몰아세웁니다. 마치 기본도 되어 있지 않다는 듯 말이지요. 개인적으로는 미국에서 공부할 때 책으로만 알고 있던 것이 바로 표준화 계수인데, 한국에 오니 이게 이렇게 중요할 줄 몰랐습니다. 문제는 그래서 다른 심사위원들에게 표준화계수에 대해 물어보면 정확하게 아는 분도 거의 없거니와 이 표준화계수를 정확하게 해석하는 분은 보기 드물었습니다. 참 알 수 없는 노릇이지요.\n일단 표준화계수에 대해서 알아봅시다.\n\n\n\n\n\n\nFigure 2.24: 표준화계수의 예\n\n\n\nFigure 2.24 은 회귀분석 결과표입니다. 좌측이 Jamovi의 결과이고, 우측이 SPSS의 결과입니다. 대부분의 통계 프로그램의 경우 좌측의 Jamovi처럼 표준화계수를 Default로 제시하지 않습니다. 별도의 명령을 주거나 클릭을 하면 표준화계수를 리포트 하는 것이 일반적입니다. 예외적으로 SPSS는 표준화계수를 Default로 리포트합니다. 아마도 한국에서 표준화계수를 중요시하는 이유가 바로 SPSS 때문이 아닐까 생각합니다. 대략 2000년대 초반까지는 SPSS를 대체할만한 개인 소프트웨어가 거의 없었기 때문에 이해는 되나 요즘은 워낙 좋은 소프트웨어가 많아서 굳이 SPSS를 고집할 필요는 없다고 생각됩니다.\n그렇다면, 표준화계수는 무엇이고 어떻게 해석해야 할까요?\n\n\n2.6.2 표준화계수의 예제\n표준화계수의 예제를 하나 만들어 보겠습니다. 간단한 회귀분석을 해보도록 하겠습니다.\n\n종속변수: 주택가격(price)\n독립변수\n\nsqft_living: 거실 사이즈\nfloors: 주택의 층수\nwaterfront: 물가(강/바다)에 근접한 주택인지의 유무\n\n더미변수(1: 있음, 0: 없음)\n\n\n\n제가 유투브 녹음을 할때, waterfront의 의미를 정확하게 몰랐는데 나중에 알았네요. 수영장이 아니라 물가에 인접한 주택을 의미하는 것이었습니다. 여기서 의도하는 것은 거실의 크기가 크거나 층수가 높은 주택, 혹은 물가에 인접한 주택이 가격이 높을 것이라는 가정하에 독립변수를 넣었습니다. 아래는 그 결과표입니다.\n\n\n\n\n\n\nFigure 2.25: 표준화계수\n\n\n\nJamovi에서 클릭 한 번만 하면 가장 우측에 표준화계수를 리포트해줍니다.\n표준화계수의 장점은 종속변수에 대한 독립변수들의 단위(scale)을 통일시킨 계수로서 표준화계수의 단위(scale)는 없어져 모든 독립변수를 같은 단위(scale)상에서 비교 가능하다는 것입니다. 이게 무슨 뜻인가 싶으실 겁니다. 쉽게말해 표준화계수의 값을 해석할 때는 원래 변수의 단위(scale)이 사라지고, 모든 독립변수는 단위가 없는 것으로 변경된다는 의미입니다. 여전히 어렵죠? 일단 그렇게 이해하고 뒤에서 자세한 설명을 해보겠습니다.\n표준화계수의 또다른 특징이라면, 표준화계수에 의한 회귀직선은 원점(0,0)을 지나가는 회귀직선이 되고, 이로 인해 절편(intercept)은 0이 됩니다. 더불어 단위(scale)가 없고 모든 독립변수의 단위가 동일하게 되었기 때문에 회귀계수의 크기 비교가 가능해집니다.\n표준화라는 단어에서 혹시 눈치를 채신 분도 있을텐데, 처음부터 모든 변수를 표준화해서 회귀분석을 하면 표준화계수와 동일한 결과를 얻을 수 있습니다. 궁금하신 분들은 한 번 시도해보시길 바랍니다. 여기서 표준화란 z-transformation을 의미합니다. 앞에서 공부한 z-test의 z-value를 떠올리시면 됩니다.\n\n\n2.6.3 표준화계수의 계산방법\n표준화계수를 계산하는 방법은 다음과 같습니다.\n\\[표준화계수 = 비표준화계수 \\div \\frac{SD_y}{SD_x} = 비표준화계수 \\times \\frac{SD_x}{SD_y}\\]\n\\[SD_x = 독립변수의 표준편차,\\; SD_y = 종속변수의 표준편차\\]\n그렇다면 Figure 2.25 을 이용하여sqft_living의 표준화계수를 계산해 보면,\n\\[표준화계수 = 271 \\times (918 \\div 367127) = 0.677\\]\n소수점 자리가 약간 차이가 나긴 하지만 결과표에 나온 표준화계수와 동일합니다. 그렇다면 무슨 뜻일까요?\n\n\n2.6.4 표준화계수의 해석\n가장 많이 사용되는 해석방법은 이렇습니다. 결과표의 세 개의 독립변수의 표준화계수를 비교해 보면 sqft_living의 표준화계수가 0.6773으로 가장 큽니다. 이렇게 결과가 나오면 일반적으로 세 독립변수 중에서 sqft_living의 영향력이 가장 크다고 해석합니다. 사실 한국에서는 이렇게 해석하고 끝이 나긴 하는데, 이게 엄밀하게 따져보면 상당히 위험한 해석일 수 있습니다. 지금 이 예제에서는 나머지 두 변수의 표준화계수가 워낙 작아서 이렇게 해석할 여지가 있기는 하나 통계적 의미를 따져본다면 세 변수의 크기를 통계적으로 비교하여 p-value를 확인한 것이 아니므로 일종의 rule of thumb이 라고 할 수 있습니다. 이는 쉽게 말해 운 좋게 맞았다라고 하는 것이지요. 최근 통계학에는 이런 문제를 해결하기 위해 relative importance라는 주제가 다양한 방법으로 발전 중에 있습니다. 문제는 매우 어렵다는 것입니다. 뿐만 아니라 단지 누가 더 영향력이 크냐를 알기 위해 사용하기에는 그다지 현실적인 의미가 약하다고 할 수 있습니다. 왜냐하면, 이 예제의 경우 거실의 크기가 주택가격에 절대적이기 때문에 주택 가격을 높이기 위해 거실 크기만 크게하면 된다라는 해석은 오히려 문제를 일으킬 수 있습니다. 우선 건축비용의 문제가 있을 수 있기도 하지만 법적인 규제는 전혀 고려되지 않은 것이기도 하고 실제로 다른 변수들을 조정하는 비용대비 거실을 크게하는 비용이 더 효율적이거나 효과적인지는 알 수 없기 때문입니다.\n다음으로 표준화계수의 해석에 대해 이야기 해 보겠습니다.\n비표준화계수의 경우 sqft_living이라는 변수를 예로 들면, 거실 사이즈가 1 feet2 커지면 주택가격이 271 US dollar 오른다고 해석할 수 있습니다. 매우 직관적이고 단순한 해석입니다. 이제 표준화 계수로 해석을 해보겠습니다. 거실 사이즈가 1 표준편차만큼 커지면 주택가격이 1 표준편차$$0.6773 US dollar 오른다. 이게 도대체 무슨 뜻일까요? 이를 이해하려면 독립변수와 종속변수의 표준편차를 먼저 알아야 합니다.\n\\[거실사이즈 표준편차= 918 \\; feet^2, \\; 주택가격 표준편차= 367127 \\; USD\\]\n위의 두 표준편차를 이용해서 다시 해석해보면, 거실사이즈가 918 feet2 커지면 주택가격은 248655 USD (=367127$$0.6773) 오른다. 무슨 뜻인지 쉽게 이해가 되시나요? 전혀 감이 잡히지 않습니다. 왜냐하면 이런 단위는 우리가 평소 잘 사용하는 단위도 아니고 쉽게 이해될만한 사이즈가 아니기 때문입니다. 그렇다면 왜 이런 복잡한 표준화계수를 사용하는 것일까요? 몇 가지 이유는 있습니다. 일단 각 독립변수의 단위를 없애기 위해 각 독립변수의 표준편차를 단위로 사용했다는 점이 그렇습니다. 문제는 단위가 없어져서 동일한 선상에서 비교가 가능하기는 한데, 이 동일한 선상이라는 것이 바로 독립변수의 표준편차들이 됩니다. 우리가 일반적으로 각 변수의 표준편차를 머릿속으로 이해하면서 변수간의 관계를 분석하지 않기 때문에 사실상 현실성이 떨어지는 것이 문제라고 할 수 있습니다.\n그렇다면 이제 왜 표준화계수가 필요한지 잠깐 살펴보겠습니다.\n첫번째는 논리적으로 영점 즉 (0, 0)을 지나가야 하는 경우입니다. 예를 들어보겠습니다. 경제학에서는 개인의 수입과 지출의 관계를 분석하는 경우가 종종 있습니다. 그래서 개인들의 수입과 지출 데이터를 수집하여 이를 회귀분석으로 분석합니다. 다음과 같은 그림을 보면 이해하실 수 있을 겁니다.\n\n\n\n\n\n\nFigure 2.26: 수입과 지출의 관계\n\n\n\n그런데, 문제는 Figure 2.26 에서 보듯이, 이 회귀직선이 대부분 0점을 지나지 않습니다. 왜 그럴까요? 위의 결과만 보면 수입이 없어도 지출이 있다는 의미가 됩니다. 물론, 돈을 빌릴 수도 있고, 다른 도움을 받아서 지출을 할 수도 있기는 합니다. 그러나 그런 특수한 상황은 연구의 대상에서 제외되기 마련입니다. 이와같은 결과가 나오는 이유는 일반적으로 우리가 수집 가능한 데이터에는 수입이 0인 사람이 없기 때문입니다. 문제는 그렇다고 이렇게 내버려둘 수는 없다는 것이지요. 그래서 강제로 회귀직선이 0을 지나도록 하는 방법을 사용할 수 밖에 없습니다. 그게 바로 표준화계수입니다.\n표준화계수를 사용하는 두 번째 이유는 앞서 이야기한 것처럼 사용된 여러개의 독립변수 중에서 가장 영향력이 큰 변수를 찾기 위해서 사용합니다. 문제는 앞서 이야기 했듯이 어떤 변수가 영향력이 더 크다 혹은 작다를 결론 내리려면 그에 맞는 통계적 검정을 거쳐야 한다는 것입니다. 따라서 크기가 비슷비슷한 표준화계수들 중에서 누가 조금 더 크다고 해서 해당 변수의 영향력이 가장 크다고 하는 것은 통계적으로 문제가 있는 해석이라는 것입니다. 따라서 너무 단정적으로 해석하는 것은 매우 위험하다고 할 수 있습니다. 더구나 설문조사의 경우 대부분 5점 혹은 7점척도로 통일되어 사용하는 경우가 많아 굳이 표준화를 해야할 필요도 없는 경우가 많습니다. 문제는 표준화계수가 무엇이고 어떻게 계산이 되고 어떻게 사용되어 해석되어야 하는지 자세한 내용은 알지 못하면서 다른 사람들이 이렇게 쓰니 나도 쓴다라는 식의 사용이 문제가 되는 것입니다.\n이제 우리는 회귀분석에 대해 조금 더 많이 알게 되었습니다. 조금더 앞으로 나아가 봅시다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#더미변수의-활용",
    "href": "chapter2.html#더미변수의-활용",
    "title": "2  회귀분석",
    "section": "2.7 더미변수의 활용",
    "text": "2.7 더미변수의 활용\n\n2.7.1 더미변수란 무엇인가?\n회귀분석을 공부하다 보면 자연스럽게 더미변수라는 것을 만나게 됩니다. 더미변수는 어떤 변수가 두 개 이상의 범주로 나뉘어진 경우에 사용하는 변수입니다. 예를 들어, 성별을 예로 들어보겠습니다. 성별은 남성과 여성으로 나뉘어지는데, 이를 회귀분석에 사용하려면 어떻게 해야 할까요? 성별을 0과 1로 표현하는 것이 일반적입니다. 그러면 남성은 0, 여성은 1로 표현하면 됩니다. 이렇게 하면 남성과 여성을 구분할 수 있게 되는 것입니다. 물론 반대로 코딩을 할 수도 있습니다. 남성을 1, 여성을 0으로 표현하는 것도 가능합니다. 여기서 무엇이 정답이냐고 묻는 경우가 있느데 사실 정답은 없습니다. 모두 가능합니다. 다만, 분석의 목적이나 해석의 편의성에 따라 선택하면 됩니다. 이제 좀 더 자세하게 알아보겠습니다.\n앞에서 우리는 표준화계수를 설명하면서 하나의 모델을 만들어 회귀분석을 했습니다. 앞의 예제를 다시 보면 다음과 같습니다.\n\n종속변수: 주택가격(price)\n독립변수\n\nsqft_living: 거실 사이즈\nfloors: 주택의 층수\nwaterfront: 물가(강/바다)에 근접한 주택인지의 유무\n\n더미변수(1: 있음, 0: 없음)\n\n\n\n여기서 waterfront라는 변수가 더미변수였습니다. 더미란 영어로 Dummy로 씁니다. 더미변수의 특징을 정리해 보면 다음과 같습니다.\n\n값이 오직 0과 1로만 이루어진 변수이며,\n값 0과 1에는 수리적인 의미가 없습니다\n기본적으로 이산형/범주형 변수인데 이 변수를 연속형 변수처럼 사용하고자 만듭니다\n다르게 표현하자면, 더미변수는 범주형 변수를 연속형 변수로 변환하는 방법입니다\n더미변수를 사용하면 범주형 변수의 각 범주에 대한 회귀계수를 구할 수 있다는 것이 장점입니다\n\n그렇다면, 왜 더미변수를 사용하는 것일까요?\n\n범주형 변수의 경우 그 범주의 개수가 만약 3개 이상일 경우\n\n코딩할 때, 1, 2, 3, 이런식으로 하면 변수의 속성이 연속형 변수가 되어 문제가 발생합니다\n그러므로 이런 방식으로는 회귀분석에서 사용할 수 없습니다\n\n예제: 학력변수의 경우 중졸/고졸/대졸/석사/박사의 5개 범주를 1/2/3/4/5로 코딩할 경우, 이는 연속형 변수로 인식됩니다\n따라서, 여러개의 더미변수를 만들어 사용하는 것이 방법입니다\n\n\n\n\n\n2.7.2 더미변수를 만들어 보자\n이제 더미변수를 만들어 봅시다. 지금 만드는 더미변수는 앞의 ANOVA에서 실습했던 데이터의 일부이기도 합니다.\n\n변수명: payment method\n변수의 범주의 개수: 4개\n\nBank transfer/credit card/electronic check/mailed check\n\n필요한 변수의 개수 = 범주의 개수 - 1 = 4 - 1 = 3개의 더미변수가 필요함\n\n이게 무슨 뜻인지 잘 이해가 되지 않을 것입니다. 아래의 표를 보면서 이해해 봅시다.\n\n\n\nTable 2.1: 더미변수 만들기 예제\n\n\n\n\n\n\n\n\n\n\n\n\ncredit card dummy\nelectronic check dummy\nmailed check dummy\n\n\n\n\nbank transfer\n0\n0\n0\n\n\ncredit card\n1\n0\n0\n\n\nelectronic check\n0\n1\n0\n\n\nmailed check\n0\n0\n1\n\n\n\n\n\n\nTable 2.1 을 보면, 첫번째 행에 세 개의 더미변수(credit card, electronic check, mailed check)가 있습니다. 그리고 첫번째 열에는 네 개의 범주가 있습니다. 먼저, 이 세 개의 더미변수는 bank transfer를 기준으로 만들어진 것입니다. bank transfer가 기준이라는 것의 의미는 모든 세 개의 더미변수에서 bank transfer는 0으로 표현되어 있다는 의미입니다. credit card는 오직 credit card dummy에서만 1로 표현되고, electronic check와 mailed check는 0으로 표현되어 있습니다. 동일하게 electronic check은 오직 electronic check dummy에서만 1이고 나머지 credit card와 mailed check은 0입니다. 마지막으로 mailed check은 오직 mailed check dummy에서만 1이고 나머지는 모두 0입니다.\n중요한 것은 여기서 각 더미변수가 의미하는 것을 이해하는 것이 중요합니다. credit card 더비면수가 의미하는 것은 bank transfer를 기준으로 credit card가 1이라는 뜻입니다. 이것이 회귀분석에서 의미하는 것은 이 더비변수의 회귀계수가 의미하는 것이 바로 기준인 bank transfer를 기준으로 했을 때, credit card가 회귀계수만큼 차이가 난다라는 의미입니다. 다소 난해할 수 있는데 회귀분석 결과표를 보면서 다시 설명하겠습니다.\n아마도 누구나 질문할 만한 것이 바로 왜 bank transfer 더미변수는 없냐는 것일 겁니다. 즉, 범주가 4개이면 더미변수도 4개가 되어야 하는 것이 아닌가 하는 의문을 가질 수 있습니다. 만약 이렇게 범주의 개수와 동일한 개수의 더미변수를 사용하게 되면 회귀분석은 에러가 나거나 통계 소프트웨어가 자동으로 임의의 한 범주를 제거하고 결과를 리포트할 것입니다. 이렇게 범주의 개수와 동일한 개수의 더미변수를 쓰는 것을 더미트랩이라고 하는데, 이렇게 되면 회귀분석이 되지 않습니다. 이유는 이 경우 비교할 기준이 없기 때문입니다. 4개의 범주를 상호간 비교해야 하는데, 이 경우 비교의 대상이 없다면 비교자체가 불가능하기 때문에 에러가 납니다. 물론 수리적으로 해석하면 다른 이야기가 될 것이지만 초보자인 우리는 이정도만 알면 됩니다. 즉, 범주의 개수에서 한 개 뺀 개수의 더미변수를 사용하는 것이 올바른 방법이라는 것입니다.\n\n\n2.7.3 더미변수를 해석하는 방법\n이제 우리가 위에서 만든 세 개의 더미변수를 넣어서 간단한 회귀분석을 하겠습니다. 사용될 독립변수는 이 세 개의 더미변수이고 종속변수는 총 지불금액입니다. 참고로 여기서 사용하는 데이터는 미국의 데이터로 개인이 인터넷을 사용하는 경우 지불하는 지불 방법에 따라서 총 지불금액이 같은지 다른지 알아보겠다는 의도를 가지고 실시한 회귀분석입니다.\n\n\n\n\n\n\nFigure 2.27: 더미변수 예제\n\n\n\nFigure 2.27 는 회귀분석 결과표입니다. Jamovi는 다른 소프트웨어보다 꽤 친절하게 결과를 리포트해 줍니다. 우선, 우리가 사용한 더미변수에서 기준이 되는 범주는 bank transfer입니다. 이 범주는 더미변수로서 추가되지 않고 모든 더미변수에서 0으로 코딩되어 기준그룹 (reference group)이 됩니다.\n그럼 위의 결과표를 해석해 보겠습니다. 첫번째 줄의 intercept는 상수 혹은 절편입니다. 다음 줄의 PaymentMethod라는 줄이 세 개의 더미변수를 모아 놓은 것입니다. 첫번째가 Credit card 더미변수입니다. Jamovi에서는 기준그룹이 누구인지 분명하게 알려주기 위해 Credit card - Bank transfer 이런 식으로 표기합니다. 뒤의 Bank transfer는 기준그룹이라는 의미입니다. 첫번째 더미의 Estimate는 회귀계수이고 그다음의 SE는 표준오차, t는 t-value, p는 p-value입니다. 우선 확인해야 할 것은 Credit card 더미의 p-value가 0.918이므로 유의하지 않다는 것입니다. 이것이 의미하는 것은 Credit card의 총지불금액과 Bank transfer의 총지불금액이 통계적으로 유의하게 다르지 않다는 의미입니다. 즉, 동일하다는 것이지요. 우리말로 조금 쉬게 풀어보면, 신용카드로 지불하는 고객과 계좌이체를 하는 고객의 인터넷 사용료 총 지불금액이 통계적으로 동일하다는 것입니다. 즉, 아무런 차이가 없다는 것입니다.\n두번째는 Electronic check 더비변수입니다. 이 더미변수의 p-value는 0.001보다도 작다고 되어 있으므로 통계적으로 유의합니다. 주의해야할 것은 회귀계수의 방향(+/-)입니다. Electronic check의 회귀계수는 -988.43입니다. 이는 전자수표로 지불하는 고객과 계좌이체로 지불하는 고객의 총지불금액이 통계적으로 유의한 차이가 있고, 전자수표로 지불하는 고객이 계좌이체하는 고객에 비해 평균적으로 988.43 US Dollar 적은 총지불금액을 보인다는 의미입니다. 중요한 것은 단순히 유의하다가 아니라 기준그룹에 비해 해당 범주가 얼만큼 차이가 크다 혹은 작다를 분명하게 해석해야 한다는 점입니다.\n마지막으로 Mailed Check 더미변수는 통계적으로 유의하면서 회귀계수가 -2024.82임을 확인할 수 있습니다. 이는 종이수표로 지불하는 고객이 계좌이체를 하는 고객에 비해 평균적으로 2024.82 US Dollar 적게 지불하고 있다는 것을 의미합니다.\n이와같이 더미변수는 범주형 변수를 마치 연속형 변수인것 처럼 바꾸어 회귀분석에 독립변수로 넣어 쉽게 해석할 수 있다는 장점이 있습니다. 그런데 만약 연구자가 Electronic check와 Mailed check를 비교하고 싶다고 하면 현재의 더미변수로는 비교가 불가능합니다. 왜냐하면 현재 비교대상이 되는 기준그룹이 바로 Bank transfer이기 때문입니다. 따라서, 이렇게 비교하고자 하는 범주가 다를 경우 기준그룹을 그 범주로 변경하여 다시 더미변수를 만들어 회귀분석을 해야합니다.\n더미변수는 알고나면 매우 단순하지만, 정확하게 이해하지 못하면 제대로 활용하지 못하는 아쉬움이 많은 변수입니다. 정확하게 알고 잘 사용하도록 합시다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#다중공선성-multicollinearity이란-무엇일까",
    "href": "chapter2.html#다중공선성-multicollinearity이란-무엇일까",
    "title": "2  회귀분석",
    "section": "2.8 다중공선성 (Multicollinearity)이란 무엇일까?",
    "text": "2.8 다중공선성 (Multicollinearity)이란 무엇일까?\n\n2.8.1 발음도 어려운 단어 다중공선성\n사실 한글로도 발음이 어렵긴합니다만, Multicollinearity는 미국 아이들도 발은에 꽤 애를 먹는 그런 영어단어입니다. 보통 회귀분석을 공부해보신 분이라면 많이 들어본 단어일 것입니다. 이를 이해하기 위해서는 기본적으로 상관관계, R2의 계산, 그리고 최소제곱법에 대한 개념은 알고 있어야 합니다.\n\n\n2.8.2 그림으로 이해하는 다중공선성\n여태까지는 단순하게 독립변수가 1개인 회귀분석만 공부했습니다. 하지만 현실적으로 독립변수가 1개인 회귀분석은 사실상 의미가 없습니다. 요즘은 거의 보기 어렵긴합니다만, 불과 몇 년전까지만해도 단 1개의 독립변수로 회귀분석을 하는 논문이 꽤 있었습니다. 재미있는 것은 이런 회귀분석을 다른 독립변수로 여러개 만들어 리포트하는 방식이 상당히 많았다는 점입니다. 뒤에가서 설명할 일이 있겠지만, 이런 방법은 거의 100% Model Mis-specification 즉 모형 부적합으로 보아야 합니다. 하나의 종속변수를 설명하는 인과관계에 있는 독립변수가 단 1개일 수는 없기 때문입니다. 결론적으로 모델을 너무 심하게 단순화했다고 보는 것이지요.\n어쨋든 이번에는 독립변수가 3개인 회귀분석을 생각해 봅시다.\n\\[y = a + b_1 x_1 + b_2  x_2 + b_3 x_3\\]\n위와 같은 회귀식이 있다고 합시다. 앞서 이야기 했듯이 회귀분석이란 종속변수의 분산을 독립변수로 설명하는 것이라고 했습니다. 이를 그림으로 그려보면 다음과 같습니다.\n\n\n\n\n\n\nFigure 2.28: 다중공선성의 이해\n\n\n\n회색 동그라미 부분이 종속변수 y의 분산입니다. 이 분산을 우리는 세 개의 독립변수로 설명하려 합니다. 문제는 독립변수 \\(x_2\\)와 \\(x_3\\)이 서로 상관관계가 높다는 것입니다. 이는 두 독립변수가 서로 설명하는 종속변수의 분산이 겹치는 것을 의미합니다. Figure 2.28 을 보면 \\(x_2\\)와 \\(x_3\\)이 서로 상관관계가 높아 종속변수 y의 분산을 설명하는데 중복되는 부분이 많다는 것을 알 수 있습니다. 이를 다중공선성이라고 합니다.\n\n\n2.8.3 왜 다중공선성이 문제일까?\n다중공선성은 회귀분석에서 큰 문제입니다. 이유는 다음과 같습니다.\n\n만약 두 변수가 완벽한 다중공선성에 걸려 있다면, 다르게 말해 \\(x_1 = b_2 x_2\\) 라고 하면,\n이는 회귀분석에서 \\(x_1\\)과 \\(x_2\\)가 동일한 변수로 취급된다는 것을 의미합니다\n이렇게 되면, 회귀분석의 가정(전제조건)을 위배하는 것이며, 이런 경우 회귀분석은 불가능합니다\n왜냐하면, 같은 변수를 두 번 넣은 것이기 때문에 최소제곱법 계산이 불가능하기 때문입니다\n\n그렇다면, 완벽한 다중공선성, 영어로는 perfect collinerity가 아니어도 문제가 될까요?\n\n그렇습니다. 이런 경우 회귀계수의 표준오차가 비정상적으로 커지는 것이 문제입니다\n표준오차의 비정상적 확대가 왜 문제일까요?\n\n회귀계수값의 유의성은 t-value에 의해 결정됩니다\n앞에서 살펴본 것처럼, t-value는 회귀계수를 표준오차로 나눈 값입니다\n그러므로, 다중공선성으로 인해 표준오차가 비정상적으로 커지면 t-value값이 작아져서 유의해야할 변수가 유의하지 않게 되어\n회귀분석의 결과를 왜곡하게 됩니다\n\n\n\n\n2.8.4 다중공선성을 확인하는 방법\n다중공선성을 확인하는 방법은 여러가지가 있습니다. 가장 대표적인 방법은 다음과 같습니다.\n\n산포도 & 상관계수\n\n\n두 독립변수의 산포도를 보았을 때, 심각하게 상관관계가 높아보인다면 다중공선성이 의심됩니다\n이런 경우 상관계수를 확인할 필요가 있습니다\n\n상관계수가 만약 0.9를 넘는다면 (0.9보다 작아도) 다중공선성의 문제가 있을 수 있습니다\n\n\n\n허용공차 (tolerance)를 확인\n\n\nTolerance란 한 개의 독립변수를 종속변수로 놓고 나머지 독립변수를 독립변수로 하는 회귀분석을 했을 때 나오는 R2를 이용해 (1-R2)로 계산한 값입니다\n만약, R2 가 1 이라면 이는 독립변수 간에 심각한 상관관계가 있음을 의미합니다\n\n이 경우 tolerance인 (1-R2)는 0이 될 것이므로\nTolerance가 0이면 완벽한 상관성을 의미하여 다중공선성이 심각함을 의미합니다\n\n\n\n분산팽창지수 (VIF: Variance Inflation Factor)\n\n\n가장 많이 사용하는 방법으로,\n\\(VIF = 1 \\div tolerance = 1 \\div (1-R^2)\\)\n그러므로, VIF가 크다는 것은 다중공선성이 크다는 의미가 되며\n일반적으로 VIF가 10보다 크면 문제가 있다고 판단합니다\n그러나 이는 연속형변수의 경우에 해당합니다\n만약 더미변수의 경우에 VIF가 3 이상이라면 다중공선성을 의심해야 합니다\n\n\n상태지수 (Condition Index)\n\n\n흔하게 사용되지는 않는 방법입니다\n일반적으로 100 이상이면 심각한 다중공선성이 존재한다고 봅니다\n\n\n\n2.8.5 다중공선성을 해결법\n\n다중공선성이 큰 변수가 유의한지 아닌지 확인해야 합니다\n\n\n대부분의의 경우 변수를 무조건 빼라고 하는데 그렇지 않습니다\n다중공선성이 있음에도 불구하고 만약 주요 관심심 독립변수가 유의하다면 그 변수를 빼는 것은 좋지 않습니다\n\n이는 표준오차가 비정상적으로 팽창되었음에도 유의하다는 뜻이기 때문에 이 변수가 그럼에도 불구하고 매우 유의하다는 의미가 되어 그대로 두어도 무방합니다\n간혹 여기에 태클을 거는 사람들이 있는데, 100% 완벽한 다중공선성이 아닌 한 문제가 크게 되지는 않습니다\n\n특히나, 조절효과를 확인하기 위해 교호작용(interaction) 변수를 추가하는 경우 연구자가 의도적으로 interaction을 추가하여 어느 정도의 다중공선성을 피할 수는 없습니다\n따라서, 약간의 다중공선성 문제가 발생하더라도 연구자의 의도와 변수의 유의성에 따라 결정해야 합니다\n\n\n해당 변수를 제거\n\n\n가장 일반적인 방법으로,\n문제는 해당변수가 연구의 중심이되는 중요변수일 경우 문제가 됩니다\n만약 중요변수라면, 다른 변수를 제거하거나 변수를 변형하여 다중공선성을 해결해야 합니다\n문제는 이러한 방법이 불가능하다면 경우에 따라서 연구 자체가 망가져 버릴 수 있습니다\n대부분의 경우, 이러한 문제가 발생하는는 근본적인 원인은 기존연구 및 이론/논리적 구성이 사전에 부족했기 때문입니다\n\n\n주성분분석으로 변수를 재조합\n\n\n뒤에서 공부할 주성분분석은 변수간의 겹치는 분산을 제거하는 효과가 있습니다\n이렇게 중복되는 분산을 제거하면 VIF 문제는 쉽게 해결되지만,\n문제는 반드시 중복되는 분산만 제거하는 것은 아니어서 경우에 따라 재조합된 변수가 이상한 결과를 내는 경우가 많습니다\n\n\n다중공선성이 발생한 독립변수들을 합친다\n\n\n다중공선성이 높은 (상관관계가 높은) 변수들은 결국 비슷한 것을 의미하므로,\n이들을 하나로 합쳐서 회귀분석에 사용할 수 있습니다\n그러나, 새로 합쳐 놓은 변수가 유의하다 해도 해석이 애매하거나 어려워질 수 있습니다\n또한, 이러한 방법은 변수가 많을 경우에는 적용하기 어렵습니다\n왜냐하면 많은 변수를 하나로 합치면 이 변수가 의미하는 바가 모호해지기 때문입니다\n하나로 합치는 방법으로는 평균값을 가장 많이 사용하나 이것도 완벽하다고 할 수는 없습니다\n\n\n능형 회귀분석\n\n\n이런 회귀분석 방법이 있다고 알고만 일단 넘어갑시다\n최근에 많이 관심을 받는 방법이기는 하나 초보자에게는 어려운 방법입니다\n\n\nMean centering 방법\n\n\n모든 변수를 각 변수의 평균값으로 뺀 뒤에 회귀분석을 하는 방법\n어느정도의 효과는 있으나 완벽하지는 않으며,\n최근 연구에 따르면 이 방법은 전혀 효과가 없다고 합니다\n문제는 이 방법이 국내에서는 상당히 많이 사용되고 일종의 미신처럼 여겨지고 있습니다\n\n이제 회귀분석의 기본적인 내용들을 거의 다 마스터 해가고 있습니다. 조금만 힘내서 끝가지 가보도록 합시다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#이분산성이란-무엇인가",
    "href": "chapter2.html#이분산성이란-무엇인가",
    "title": "2  회귀분석",
    "section": "2.9 이분산성이란 무엇인가?",
    "text": "2.9 이분산성이란 무엇인가?\n이분산성(Heteroscedasticity)은 회귀분석에서 오차항의 분산이 일정하지 않은 경우를 의미합니다. 이분산성이 발생하면 회귀분석의 가정이 깨지게 되어 회귀분석 결과가 신뢰할 수 없게 됩니다. 이분산성이 발생하면 회귀분석 결과에 대한 통계적 검정이 신뢰할 수 없게 되며, 회귀분석 결과의 예측력이 떨어지게 됩니다.\n일반적으로는 위와 같이 설명을 합니다. 무슨 뜻인지 쉽게 이해가 되지 않지요? 그렇다면 하나씩 알아보겠습니다.\n\n2.9.1 이분산성의 의미\n이분산성은 영어로 Heterodascity라고 합니다. Hetero는 다양한, 다른이라는 뜻이 있습니다. 반대말은 Homo입니다. 그러므로, 이분산성이란 분산이 다르다는 의미입니다. 그렇다면 누구의 분산이 다르고 이게 왜 문제가 되는 것일까요?\n누구의 분산이 다른가? - 회귀분석에 투입된 독립변수의 회귀계수 표준오차(분산)이 다르다는 의미입니다\n왜 문제일까? - 회귀계수의 유의성을 판단하려면 우선 t-값을 계산해야 하는데 - t-value는 회귀계수를 표준오차로 나눈 것이므로 - 표준오차가 이분산성을 띄게되면 하나의 수로 나타낼 수 없습니다 - 왜냐하면 표준오차가 독립변수의 값에 따라서 변하기 때문입니다\n\n\n2.9.2 이분산성의 예제\n앞의 회귀분석 예제를 이용해 보겠습니다.\n\n종속변수: 주택가격 (price)\n독립변수: 거실크기 (sqft_living)\n\n한 개의 독립변수를 사용하여 회귀분석을 하기 전에, 독립변수를 x축으로 종속변수를 y축으로 하는 산포도를 그려보겠습니다\n\n\n\n\n\n\nFigure 2.29: 이분산성 예제: 산포도\n\n\n\nFigure 2.29 의 산포도를 보면 sqft_living의 값이 커질 수록 price의 폭이 점점 커지는 것을 볼 수 있습니다. 이 데이터로 회귀분석을 하면 다음과 같습니다.\n\n\n\n\n\n\nFigure 2.30: 이분산성 예제: 회귀분석 결과\n\n\n\nFigure 2.30 의 회귀분석 결과를 보면 sqft_living의 회귀계수는 281이며, 이 회귀계수는 통계적으로 유의합니다. 그러나, 이 회귀계수의 표준오차는 1.94로 나타나 있지만 좌측의 그림에서 보듯이 sqft_living이 커질 수록 price의 폭이 커지기 때문에 이 표준오차값을 신뢰할 수 없게 됩니다. 확실하게 확인하려면 잔차도를 확인해 보면 알 수 있습니다.\n\n\n\n\n\n\nFigure 2.31: 이분산성 예제: 회귀분석 잔차도\n\n\n\nFigure 2.31 의 잔차도를 보면 sqft_living이 커질 수록 잔차의 폭이 커지는 것을 볼 수 있습니다. 이것이 이분산성이 발생한 것입니다.\n\n\n2.9.3 이분산성을 확인하는 방법\n\n산포도\n잔차도\nWhite test\n\n\n테스트 결과가 유의하면 이분산성이 있다는 뜻\n\n\nGoldfeld-Quandt test\n\n\n테스트 결과가 유의하면 이분산성이 있다는 뜻\n\n\nBreusch-Pagan test\n\n\n테스트 결과가 유의하면 이분산성이 있다는 뜻\n\n주로 사용하는 방법은 White test와 Breusch-Pegan test입니다.\n\n\n2.9.4 이분산성의 해결책\n\n(heteroskdastistic) robust standard error를 사용\n\n\n구하는 방법은 너무 복잡함\n통계 프로그램에 따라서 기능을 제공하기도 하고 아니기도 함\n\n\nWeighted least square regression (WLS regression)\n\n\n이분산성의 모형을 모델링하는 함수를 찾아서 그 역함수로 독립변수를 만들어 추가하는 OLS\n문제는 이분산성의 함수를 찾는다는 것이 쉽지 않음\n이론적으로는 쉬우나 현실적으로는 어려움\n\n\nGLS/FGLS regression\n\n\n근본적으로는 WLS와 동일한 개념으로 접근\n이론적으로는 쉬우나 현실적으로는 어려움\n\n이러다 보니 불과 몇 년전까지만 해도 이분산성이 발견되면 연구를 접어야 하나 고민하기도 했습니다. 최근에는 워낙 소프트웨어가 좋아져서 Robust standard error를 클릭 한 번으로 구해주는 프로그램이 많아졌습니다. 이러한 프로그램을 사용하실 것을 권합니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter2.html#회귀분석을-실습해-보자",
    "href": "chapter2.html#회귀분석을-실습해-보자",
    "title": "2  회귀분석",
    "section": "2.10 회귀분석을 실습해 보자",
    "text": "2.10 회귀분석을 실습해 보자\n이제 회귀분석을 실습해 보도록 하겠습니다.\n사용할 테이터와 변수는 다음과 같습니다.\n\nData: House sales price in Kings County, USA (Kaggle.com에서 다운로드 가능)\n종속변수: price (= 매매 가격)\n\n우리가 앞에서 공부한 내용들을 바탕으로 진행하는 실습입니다. 동영상을 보면서 차근차근 따라해 보시길 바랍니다.\n데이터 다운로드가 어려우신 분들은 여기서 다운로드 받으시기 바랍니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter3.html",
    "href": "chapter3.html",
    "title": "3  조절효과와 매개효과",
    "section": "",
    "text": "3.1 조절효과란 무엇인가?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>조절효과와 매개효과</span>"
    ]
  },
  {
    "objectID": "chapter3.html#조절효과란-무엇인가",
    "href": "chapter3.html#조절효과란-무엇인가",
    "title": "3  조절효과와 매개효과",
    "section": "",
    "text": "3.1.1 조절효과의 정의\n논문을 작성하다 보면 가장 많이 사용하는 두 가지가 바로 조절효과와 매개효과입니다. 조절효과는 Moderating effect라고 표현하고 조절변수를 Moderator라고 부릅니다. 이번 장에서는 조절효과와 매개효과에 대해 알아보겠습니다.\n조절효과란 회귀분석에서 발견된 종속변수에 대한 독립변수의 영향력이 회귀계수의 방향이 바뀌거나 회귀계수의 크기(힘)가 변화하는 경우를 의미합니다.\n\n방향이 변화한다는 것은 회귀계수가 +에서 -로 혹은 -에서 +로 바뀌는 것을 의미합니다\n힘의 크기가 변화한다는 것은 회귀계수가 더 커지거나 작아지는 것을 의미합니다\n\n\n\n3.1.2 조절효과의 예제\n다음과 같은 간단한 예제를 하나 생각해보겠습니다.\n\n종속변수: 지출(\\(y_i\\))\n독립변수: 수입(\\(x_i\\))\n조절변수: 성별(\\(D_i\\))\n\n위의 세 개의 변수를 이용해 회귀식을 단계적으로 만들어 보겠습니다.\n\n기본회귀식\n\n\n\\(y_i = \\alpha + \\beta_1 x_i\\)\n\n\n기본회귀식 + 성별 더미변수\n\n\n\\(y_i = \\alpha + \\beta_1 x_i + \\beta_2 D_i\\)\n\n\n조절효과 회귀식\n\n\n\\(y_i = \\alpha + \\beta_1 x_i + \\beta_2 D_i + \\beta_3 x_i D_i\\)\n\n문제는 위와 같이 회귀식 3개를 써 놓으면 더 이상 조절효과를 이해하지 못한다는 것입니다. 위의 세 개의 회귀식을 그림으로 그려보면서 조절효과가 의미하는 것이 무엇인지 조금 더 자세하게 알아보겠습니다.\n\n\n3.1.3 그래프로 이해하는 조절효과\n\n기본회귀식\n\n\n\\(y_i = \\alpha + \\beta_1 x_i\\)\n\n\n\n\n\n\n\nFigure 3.1: 기본회귀식\n\n\n\n기본회귀식이 내포하는 연구가설은 독립변수 \\(x_i\\)인 수입이 증가할 수록 종속변수 \\(y_i\\) 지출이 증가할 것이라는 것입니다. 이 연구가설은 회귀계수 \\(\\beta_1\\)에 의해 검정됩니다. 만약 \\(\\beta_1\\)이 정의 방향으로 유의하다면 연구가설은 채택됩니다.\n\n기본회귀식 + 성별 더미변수\n\n\n\\(y_i = \\alpha + \\beta_1 x_i + \\beta_2 D_i\\)\n\n그럼 이제, 기본회귀식에 성별 더미변수를 추가해보겠습니다. 여기서 성별 더미변수 \\(D_i\\)는 남성인 경우 \\(D_i=0\\)으로 여성인 경우 \\(D_i=1\\)로 정의 하겠습니다. 이렇게 되면 새로운 두 번째의 회귀식은 남성의 회귀식과 여성의 회귀식으로 나눠서 두 개의 회귀식을 구분할 수 있습니다.\n\n남성의 회귀식: \\(y_i = \\alpha + \\beta_1 x_i\\)\n여성의 회귀식: \\(y_i = (\\alpha + \\beta_2) + \\beta_1 x_i\\)\n\n남성의 경우 성별 더미변수 \\(D_i=0\\)이기 때문에 결국 기본회귀식과 동일한 회귀식이 됩니다. 반면에, 여성의 회귀식은 \\(D_i=1\\)이므로 \\(\\beta_2\\)가 상수가 되어 절편 \\(\\alpha\\)와 합쳐질 수 있습니다. 그러므로, 만약 \\(\\beta_2\\)가 정의 방향(+)로 유의하다면, 남성의 회귀식과 여성의 회귀식은 다음과 같이 그릴 수 있습니다.\n\n\n\n\n\n\nFigure 3.2: 기본회귀식+성별 더미변수\n\n\n\nFigure 3.2 에서 보듯이 우측의 남성의 회귀식은 결론적으로는 기본회귀식과 동일하고, 여성의 회귀식은 절편이 \\(\\alpha\\)에서 \\(\\alpha + \\beta_2\\)가 되어 \\(\\beta_2\\)만큼 증가한 모양이 됩니다. 기울기 \\(\\beta_1\\)은 그대로라는 점이 중요합니다. 이런 경우 연구가설을 말로 풀어서 쓴다면 어떻게 해야 할까요? 제가 이 부분을 강조하는 이유는 대부분의 학생들이 이것을 그림으로 보고 이해하는 것 같아도 실제로 연구가설을 글로 써보라고 하면 전혀 다른 말을 쓰기 때문입니다. 뿐만 아니라 결과의 해석도 이상하게 하는 경우가 많습니다.\n\n연구가설: 여성이 남성에 비해 더 많이 지출할 것이다.\n결과해석: 여성이 남성에 비해 평균적으로 \\(\\beta_2\\)만큼 더 유의하게 지출한다.\n\n그러므로 이 경우 \\(\\beta_2\\)의 유의성이 의미하는 것은 절편의 증가(또는 감소)입니다. 다시 한 번, 이야기하자면 회귀분석에서 절편이 의미하는 것은 종속변수 \\(y_i\\)의 평균값이라는 것입니다. 즉, 여성 집단의 평균 지출 금액이 남성에 비해 평균적으로 \\(\\beta_2\\)만큼 높다는 것입니다. 여기서 주의할 점은 이렇게 평균적으로 높은 지출금액은 수입과 관계 없이 높다는 점이 중요합니다. Figure 3.2 를 보면 여성과 남성의 두 회귀식이 평행한 것을 볼 수 있습니다. 당연히 두 회귀직선의 기울기가 동일하기 때문입니다. 따라서 이 두번째 모델 (기본회귀식+성별 더미변수)을 이용한 회귀분석의 결과를 해석할 때, 수입의 증가는 여성과 남성의 평균지출의 차이에 아무런 영향이 없다는 것입니다. 만약 수입의 증감 혹은 수입의 차이에 따라 남성과 연성의 지출 차이가 달라진다고 해석하면 잘못 해석한 것이 됩니다.\n\n조절효과 회귀식\n\n\n\\(y_i = \\alpha + \\beta_1 x_i + \\beta_2 D_i + \\beta_3 x_i D_i\\)\n\n위에서 한 것처럼, 여성의 회귀식과 남성의 회귀식으로 나눠보겠습니다.\n\n남성의 회귀식: \\(y_i = \\alpha + \\beta_1 x_i\\)\n여성의 회귀식: \\(y_i = (\\alpha + \\beta_2) + (\\beta_1 + \\beta_3) x_i\\)\n\n위와 동일하게 남성의 회귀식은 기본회귀식과 똑같습니다. 여성의 회귀식은 두번째처럼 절편이 \\(\\alpha + \\beta_2\\)이지만, 기울기가 다릅니다. 기본회귀식과 위의 경우 모두 기울기는 \\(\\beta_1\\)이었습니다. 그러나, 조절효과의 회귀식에서 여성의 회귀식의 기울기는 \\(\\beta_1 + \\beta_3\\)가 됩니다. 즉, \\(\\beta_3\\)가 정의 방향(+)으로 유의하다면 여성의 회귀식의 기울기는 더 가파르게 증가하게 됩니다. 이제 그림으로 확인해 보겠습니다.\n\n\n\n\n\n\nFigure 3.3: 조절효과 회귀식\n\n\n\nFigure 3.3 는 기본회귀식에 성별더미만 추가한 경우(좌측)와 조절회귀식의 경우(우측)를 비교해서 보여줍니다. 우측에서 보는 것처럼 여성의 회귀식의 기울기가 더 가파르게 증가하는 것을 볼 수 있습니다. 즉, 기울기가 \\(\\beta_3\\)더 빠르게 증가하는 것입니다. 이를 어떻게 해석해야할 까요?\n우선 앞의 경우와 동일하게 여성이 남성에 비해 평균적으로 \\(\\beta_2\\)만큼 더 지출하고 있는 것은 동일합니다. 여기에 더해 여성은 남성에 비해 수입이 동일하게 1단위 증가한다 할지라도 \\(\\beta_3\\)만큼 더 지출한다는 의미가 됩니다. 여기서 수입 1단위는 데이터상에서 수입의 기본 단위(unit)를 의미합니다. 만약 조사가 100만원 단위로 이루어졌고 \\(\\beta_3 = 12\\)라면 여성은 남성에 비해 수입이 동일하게 100만원 증가한다 할지라도 평균적으로 12만원을 더 지출한다는 의미가 됩니다. 좀 더 자세하게 해석하자면, 만약 \\(\\beta_1=60\\)이었다고 가정하면, 남성은 수입이 100만원 증가할 때, 평균적으로 60만원의 지출이 더 증가하지만, 어성은 동일하게 수입이 100만원 증가할 때, 평균적으로 지출이 72만원 증가한다는 의미가 됩니다.\n\n\n3.1.4 조절효과에 대한 정리\n\n조절효과를 확인하기 위해서는\n\n기존의 독립변수에 조절변수를 추가적인 독립변수로 투입하고\n독립변수와 조절변수를 곱한 교호작용변수 (interaction)을 투입하여\n교호작용변수가 유의한지 확인합니다\n만약, 교호작용변수가 유의하면 조절효과가 있다고 판단합니다\n\n조절효과가 중요한 이유\n\n조절효과는 선형관계를 확인하는 회귀분석에서 비선형관계를 알 수 있는 중요한 방법이기 때문입니다\n\n\n여기서 비선형 관계란 무엇일까요? 앞에서도 몇 번 이야기한적 있지만 선형관계 즉 linear relationship이란 독립변수와 종속변수의 관계가 직선적인 것을 의미합니다. 직선적이란 회귀분석에서 기울기 \\(\\beta\\)가 변하지 않는 것을 의미합니다. 기울기가 독립변수의 값의 크기에 관계없이 일정한 것이 바로 회귀분석에서의 선형관계입니다.\n그런데, 조절변수가 등장하면서 이 선형관계가 변합니다. 위의 예에서는 수입과 지출의 선형관계가 성별이라는 더미변수에 의해 변화하는 것입니다. 왜냐하면 성별에 따라 즉 남성과 여성의 회귀식의 기울기가 달라졌기 때문입니다. 여기서 다시 말씀드리자면 남성과 여성의 회귀식이 다르다는 표현을 통계에서 사용하려면 남성과 여성의 회귀식이 같은지 다른지 테스트를 해야합니다.\n\n\\(y_i = \\alpha + \\beta_1 x_i + \\beta_2 D_i + \\beta_3 x_i D_i\\)\n\n남성의 회귀식: \\(y_i = \\alpha + \\beta_1 x_i\\)\n여성의 회귀식: \\(y_i = (\\alpha + \\beta_2) + (\\beta_1 + \\beta_3) x_i\\)\n\n\n아마도 어떤 분들은 그렇게 질문하실지도 모르겠네요. 아니 언제 남성과 여성의 회귀식 기울기가 같은지 다른지 테스트 한적이 있나요? 별도의 테스트를 한적이 없는데요? 사실 이게 헷갈리수도 있는데 우리는 이미 테스트를 마쳤습니다. 위의 회귀식을 다시 보면, 남성 회귀식의 기울기는 \\(\\beta_1\\)이고 여성 회귀식의 기울기는 \\(\\beta_1 + \\beta_3\\)입니다. 그러면 두 회귀식의 차이는 기울기 \\(\\beta_3\\)입니다.\n원래의 회귀식을 보면 가장 마지막의 변수 \\(x_i D_i\\)가 교호작용 변수 쉽게 interaction인데 이변수가 유의한지 아닌지를 보면 조절효과가 있는지 없는지 알 수 있습니다. 왜냐하면 이 interaction의 회귀계수가 \\(\\beta_3\\)이기 때문입니다. 그러므로, 만약 \\(\\beta_3\\)가 유의하면 조절효과가 유의한 것이고, \\(\\beta_3\\)가 유의하지 않다면 조절효과가 유의하지 않은 것입니다.\n헷갈리면 안되는 것이 우리가 테스트 하는 회귀식은 단 하나의 조절회귀식입니다. 이 회귀식을 가지고 통계 프로그램에서 회귀분석을 하는 것이지 남성회귀식 여성회귀식을 따로 돌리는 것이 아닙니다. 이미 조절회귀식 한 번만 돌리면 그리고 마지막의 interaction 변수의 회귀계수 \\(\\beta_3\\)가 유의한지 아닌지만 보면 조절효과가 유의한지 아닌지 알 수 있는 것이지요.\n\n\n3.1.5 추천논문\n제가 조절효과와 매개효과에 대해 강의할 때마다 학생들에게 제발 한 번만 읽어보라고 하는 논문이 바로 Baron & Kenny(1986) 논문입니다. 물론 최근에 와서는 이 Baron & Kenny (1986) 논문이 너무 과도하게 사용되고 또한 문제점이 지적되면서 인용이 줄고 있기는 하지만 여전히 조절효과와 매개효과에 대한 이해를 위해서는 가장 잘 설명되어 있고 쉽게 풀어 놓은 논문입니다. 영어이긴 하지만 매우 쉬운 영어로 되어있어 꼭 한번 읽어보시길 바랍니다. Google Scholar에 가서 검샣해보면 인용횟수도 볼 수 있습니다. 더불어 무료로 볼 수 있는 유명한 논문입니다.\nBaron, R. M., & Kenny, D. A. (1986). The moderator–mediator variable distinction in social psychological research: Conceptual, strategic, and statistical considerations. Journal of personality and social psychology, 51(6).\n이제 그럼 조절효과를 실습해 보도록 하겠습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>조절효과와 매개효과</span>"
    ]
  },
  {
    "objectID": "chapter3.html#조절효과를-실습해-보자",
    "href": "chapter3.html#조절효과를-실습해-보자",
    "title": "3  조절효과와 매개효과",
    "section": "3.2 조절효과를 실습해 보자",
    "text": "3.2 조절효과를 실습해 보자\n앞에서 했던 데이터로 계속 실습해 보도록 하겠습니다.\n사용할 테이터와 변수\n\nHouse sales price in Kings County, USA (Kaggle.com) 다운로드\n\n종속변수: price (= 매매 가격)\n독립변수: floors (= 층수)\n조절변수: waterfront (= 강/호수/바다 근접 유무)\n\n\n연구가설\n\n\\(H_1\\): 주택의 가격은 주택의 층수가 증가하면 정의 방향으로 증가할 것이다\n\\(H_2\\): 주택의 층수가 같아도 물가에 있으면 가격이 더 높을 것이다\n\n연구가설 1은 독립변수 층수와 종속변수 가격의 관계를 규정한 가설이고, 연구가설 2번이 연구가설 1의 층수와 가격의 관계를 물가의 유무가 조절한다는 조절변수에 대한 가설입니다.\n최근 Andrew Hayes의 Process 때문에 더 유명해지긴 했는데, 사실 이미 오래된 방법 중의 하나가 연구모형을 conceptual model와 statistical model로 나누어 리포트 하는 것입니다. 연구모델이 간단할 때는 꽤 좋은 방법이지만 사실 모형이 복잡하고 변수가 많으면 그다지 깔끔해 보이지 않습니다. 조절효과의 conceptual model과 statistical model은 다음과 같습니다.\n\n\n\n\n\n\nFigure 3.4: 조절효과의 conceptural & statistical model\n\n\n\nFigure 3.4 에서 X 는 독립변수를 Y는 종속변수를 W는 조절변수를 의미합니다. Statistical model에서 XW는 독립변수와 조절변수의 interaction 변수를 의미하고 화살표는 인과관계를 그리고 \\(\\beta_i\\)는 회귀계수를 의미합니다.\n이제 실습을 통해 조절효과를 마무리해 보도록 하겠습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>조절효과와 매개효과</span>"
    ]
  },
  {
    "objectID": "chapter3.html#매개효과란-무엇인가",
    "href": "chapter3.html#매개효과란-무엇인가",
    "title": "3  조절효과와 매개효과",
    "section": "3.3 매개효과란 무엇인가?",
    "text": "3.3 매개효과란 무엇인가?\n\n3.3.1 매개효과의 의미와 중요성\n매개효과란?\n\n독립변수가 종속변수에 유의한 영향을 미칠 때,\n독립변수와 종속변수 사이에서 매개하는 변수인 매개 변수를 통해 그 영향이 순차적으로 전달 되는 경우\n독립변수 X, 종속변수 Y 그리고 매개변수 M으로 정의할 때,\n\n\\(X \\longrightarrow M \\longrightarrow Y\\)\n\n이때 중간의 변수 M을 매개변수라고 함\n\n매개변수가 중요한 이유는 상황에 따라 다르나, 매개의 종류에 의해 매개 변수 없이는 독립변수의 영향이 종속변수까지 도달하지 못하는 경우가 있어 매우 중요한 효과라고 할 수 있습니다.\n\n\n3.3.2 매개효과의 종류\n매개효과는 두 가지가 있습니다.\n\n완전매개효과 (Full Mediation)\n부분매개효과 (Partial Mediation)\n\n완전매개효과는 독립변수(X)와 종속변수(Y) 사이의 관계가 매개변수(M)를 통해서만 전달되는 경우를 의미하고, 부분매개효과는 매개변수(M)를 통해 전달되는 것이 있지만, 독립변수(X)와 종속변수(Y) 사이에 직접적인 관계도 존재하는 경우를 의미합니다.\n\n\n\n\n\n\nFigure 3.5: 매개효과의 종류\n\n\n\nFigure 3.5 에서 부분매개효과는 매개변수를 통해 독립변수의 효과가 전달되면서 동시에 독립변수와 종속변수 사이에 직접적인 효과가 있다는 것이 화살표를 통해 알 수 있습니다. 여기서 매개변수를 통해서 전달되는 효과를 간접효과라고 부르고, 독립변수에서 종속변수로 직접 영향을 미치는 효과를 직접효과라고 부릅니다. 그러므로 완전매개효과는 직접효과는 없고 간접효과만 존재하는 것을 의미합니다.\n\\[ 직접효과 (Direct Effect): X \\longrightarrow Y \\]\n\\[ 간접효과 (Indirect Effect): X \\longrightarrow M \\longrightarrow Y \\]\n여기서 이 두 효과 즉 직접효과와 간접효과를 합친 것을 총효과(Total Effect)라고 부릅니다.\n\\[ 총효과 (Total Effect): 직접효과(Direct Effect) + 간접효과(Indirect Effect) \\]\n\n\n3.3.3 매개효과 검정방법\nBaron & Kenny (1986) 방법을 통해 매개효과를 검증할 수 있습니다. 가장 많이 알려진 오래된 방법입니다. 다만, 2000년대 이후 이 Baron & Kenny (1986)의 방법이 많은 문제점이 있어서 이를 보완한 방법이 제안되었습니다. 하지만, 전통적인 방법을 먼저 이해하는 것이 중요하므로 이에 대해 알아보도록 하겠습니다.\n\n회귀분석 3단계 방법 (일명, Baron & Kenny의 방법)\n\n1단계: \\(X \\longrightarrow M\\)\n2단계: \\(X \\longrightarrow Y\\)\n3단계: \\(X + M \\longrightarrow Y\\)\n\n단계별 회귀분석 결과 해석 방법\n\n1단계: X는 M에 대해 무조건 유의해야 함\n2단계: X는 Y에 대해 무조건 유의해야 함\n3단계: 2단계 회귀식에 매개변수 M이 새로이 추가된 상황에서 M은 무조건 유의해야 함\n\nX가 2단계에서는 유의했으나 3단계에서 유의하지 않으면 M은 완전매개\nX가 2단계와 3단계에서 모두 유의하면 M은 부분매개\n\n\n\n\n\n\n\n\n\nFigure 3.6: 매개효과의 검정방법\n\n\n\nFigure 3.6 을 통해 좀 더 자세하게 알아봅시다.\n우선 부분매개효과를 단계별로 다시 알아보면,\n\n1단계\n\n\n\\(M = \\alpha + \\beta_1 X\\)\n매개변수 M을 종속변수로 놓고 X를 독립변수로 하는 회귀분석을 하면,\n독립변수 X의 회귀계수인 \\(\\beta_1\\)이 무조건 유의해야 합니다\n\n\n2단계\n\n\n\\(Y = \\alpha + \\pi X\\)\n종속변수 Y, 독립변수 X로 놓고 회귀분석을 했을 때,\n독립변수 X의 회귀계수인 \\(\\pi\\)가 무조건 유의해야 합니다\n\n\n3단계\n\n\n\\(Y = \\alpha + \\beta_2 X + \\beta_3 M\\)\n2단계의 회귀분석에 매개변수 M을 추가하여 회귀분석을 하면,\n매개변수의 회귀계수인 \\(\\beta_3\\)가 무조건 유의하고 동시에 \\(\\beta_2\\)가 유의하면\n이를 부분매개라고 합니다\n\n부분매개에서 총효과는 다음과 같습니다.\n\n총효과란 직접효과와 간접효과의 합\n직접효과: \\(\\beta_2\\)\n간접효과: \\(\\beta_1 \\times \\beta_3\\)\n\\(총효과 = 직접효과 + 간접효과 = \\beta_2 + (\\beta_1 \\times \\beta_3)\\)\n\n다음으로 완전매개효과에 대해 알아봅시다. 단계별로 완전매개효과를 알아보는 방법 자체는 앞의 부분매개효과를 알아보는 방법과 동일합니다. 다만 3단계의 결과가 다르다고 보면 됩니다.\n\n1단계\n\n\n\\(M = \\alpha + \\beta_1 X\\)\n매개변수 M을 종속변수로 놓고 X를 독립변수로 하는 회귀분석을 하면,\n독립변수 X의 회귀계수인 \\(\\beta_1\\)이 무조건 유의해야 합니다\n\n\n2단계\n\n\n\\(Y = \\alpha + \\pi X\\)\n종속변수 Y, 독립변수 X로 놓고 회귀분석을 했을 때,\n독립변수 X의 회귀계수인 \\(\\pi\\)가 무조건 유의해야 합니다\n\n\n3단계\n\n\n\\(Y = \\alpha + \\beta_2 X + \\beta_3 M\\)\n2단계의 회귀분석에 매개변수 M을 추가하여 회귀분석을 하면,\n매개변수의 회귀계수인 \\(\\beta_3\\)가 무조건 유의하지만, \\(\\beta_2\\)가 유의하지 않을 경우\n이를 완전매개효과라고 합니다\n\n완전매개에서 총효과는 다음과 같습니다.\n\n총효과란 직접효과와 간접효과의 합이므로,\n직접효과: \\(\\beta_2\\) = 0가 되어 직접효과는 없습니다\n간접효과: \\(\\beta_1 \\times \\beta_3\\)\n\\(총효과 = 직접효과 + 간접효과 = 0 + \\beta_1 \\times \\beta_3\\)\n\n\n\n3.3.4 3단계 매개효과 검증방법의 문제점\n사실 Baron & Kenny (1986)의 3단계 검정방법은 현재로선 거의 전설에 가까운 오래된 방법입니다. Baron & Kenny (1986)의 논문을 읽어보면 정말 간단 명료하면서도 이해가 잘되게 설명을 잘했습니다. 이 방법이 현재까지 우리나라를 포함한 여러 나라에서 가장 많이 사용되는 방법임에는 분명하지만, 2000년대를 넘어가면서 이 방법에 대한 문제점을 지적하는 논문들이 하나 둘씩 등장하기 시작합니다. 가장 많이 지적되는 것이 Baron & Kenny (1986)의 방법은 매개효과를 검증하는 방법이 직접적인 것이 아닌 간접적인 것이라는 점입니다. 단 한 번의 통계적 검정과정을 거친 것이 아니라, 단계별로 조건을 전제로 하기 때문에 불완전하다는 것입니다.\n분명히 맞는 말이긴 합니다만, 매개효과를 이해하고 이를 초보자적인 수준에서 검증하기에는 이보다 좋은 방법은 없습니다. 이후에 이를 보완하는 차원에서 보다 직접적인 검증방법이 등장합니다. 바로 Sobel test입니다. 소벨 테스트는 매해효과의 유의성을 보다 직접적으로 검정하기 위한 방법입니다.\n\n\n\n\n\n\nFigure 3.7: 3단계 매개효과 검증방법의 문제점\n\n\n\nFigure 3.7 에서 보는 것처럼, 매개효과란 결론적으로 독립변수 X, 종속변수 Y, 그리고 매개변수 M이 동시에 겹치는 분산인 c 부분을 의미합니다. 3단계 방법에서 2단계의 회귀계수 \\(\\pi\\)는 사실상 독립변수 X의 종속변수 Y에 대한 총효과를 의미합니다. 왜냐하면 매개변수 M이 없기 때문입니다. 그런 이유로 당연히 3단계의 회귀계수 \\(\\beta_2\\)는 무조건 \\(\\pi\\) 보다 작아야 합니다. 왜냐하면 3단계의 \\(\\beta_2\\)는 독립변수 X의 직접효과이고, 3단계의 회귀계수 \\(\\beta_3\\)는 매개변수 M의 종속변수 Y에대한 효과이기 때문입니다. 정확하게는 간접효과는 1단계의 회귀계수 \\(\\beta_1\\)과 3단계의 회귀계수 \\(\\beta_3\\)의 곱이기 때문입니다.\nBaron & Kenny (1986)의 문제점은 이 간접효과부분 즉 Figure 3.7 의 \\(c\\)부분에 대한 통계적 검정을 하지 않았다는 것입니다. 그렇다면 이를 통계적으로 검정하는 소벨테스트는 어떻게 하는 것일까요?\n\n\n3.3.5 Sobel 테스트\n소벨 테스트를 위해 필요한 것은 4가지 입니다.\n\nBaron & Kenny (1986)의 1단계의 회귀계수 \\(\\beta_1\\)\nBaron & Kenny (1986)의 1단계의 회귀계수 \\(\\beta_1\\)의 표준오차 \\(SE_{(\\beta_1)}\\)\nBaron & Kenny (1986)의 3단계의 회귀계수 \\(\\beta_3\\)\nBaron & Kenny (1986)의 3단계의 회귀계수 \\(\\beta_3\\)의 표준오차 \\(SE_{(\\beta_3)}\\)\n\n기본적으로 소벨테스트는 z-test로 볼 수 있습니다. 제가 유투브 강의안에는 t-value라고 적었는데 사실 책마다 조금씩 다르게 나와서 저도 조금 헷갈리기는 합니다만, 대부분의 경우 z-value를 이야기 합니다. 계산 공식은 다음과 같습니다.\n\\(Sobel \\; z-value = \\frac{\\beta_1 \\times \\beta_3}{\\sqrt{(\\beta_1^2 \\times SE_{\\beta_3}^2) + (\\beta_3^2 \\times SE_{\\beta_1}^2)}}\\)\n계산 방법이 복잡하지는 않지만 꽤 귀찮은 편입니다. 특히 분모의 부분이 교차하면서 곱해지는 것을 헷갈리면 안됩니다. 요즘은 구글링 하면 자동으로 계산해주는 웹 페이지도 많고, 그다지 어렵지 않은 것이라 소프트웨어가 해결해 주는 경우가 많습니다.\n재미있는 것은 이 Sobel test는 1982년에 발표된 것으로 사실 Baron & Kenny (1986) 보다 먼저 나왔다고 볼 수 있습니다. 그런데, 사실 프로세스적으로 본다면 Sobel test가 Baron & Kenny (1986)을 기반으로 만들어진 것처럼 보이는 것이 사실입니다. 쉽게 말해 둘의 베이스는 거의 같다고 보면 될 것 같습니다.\n문제는 이렇다보니 Sobel test도 문제가 있다는 것입니다. Figure 3.7 을 다시 보면 결국 총효과에서 직접효과를 뺀 것이 간접효과 이므로 다음과 같이 표현할 수 있습니다.\n\\[ \\pi - \\beta_2 = \\beta_1 \\times  \\beta_3\\]\n문제는 만약 위의 좌항과 우항이 다를 경우입니다. 즉, 총효과에서 직접효과를 뺀 나머지가 간접효과가 아니라면 문제가 되는 것이지요. 이런 일이 있을까 싶지만 꽤 자주 발생합니다. 이유는 두 회귀계수의 cross product인 \\(\\beta_1 \\times  \\beta_3\\)의 분포가 불확실하기 때무입니다. 사실 이 cross product의 분포는 데이터의 분포와는 별개의 문제이기도 합니다. 회귀계수의 곱의 결과물의 분포라는게 쉽게 이해가 되지 않지만, 실제로 이런 문제가 발생한다는 것이지요. 즉, 완벽하지는 않다는 의미입니다.\n\n\n3.3.6 그렇다면 어떻게?\n이러한 문제를 해결하는 방법이 바로 Bootstraping 입니다.\n이 또한 깊이 들어가면 복잡한 문제인데, 쉽게 말해 반복 샘플링을 하는 시뮬레이션을 한다고 보면 비슷합니다. 이렇게 반복 샘플링을 해서 테스트를 하면, 95% confidence interval을 구하게 되는데, 이때 숫자 0이 이 interval 안에 포함되면 매개효과는 0이라는 의미가 되므로 매개효과는 없는 것이고, 0이 포함되지 않는 interval이 나오면 매개효과는 유의하다고 판단합니다.\n과거에는 이 방법이 구현하기 어렵기도 하고, 소프트웨어나 컴퓨터 성능이 뒷받침이 되지 않아서 거의 불가능 했으나, 지금은 쉽게 소프트웨어가 값을 구해줍니다. 참 좋은 세상입니다.\n가능하다면 제 개인적으로는 Baron & Kenny (1986)의 3단계 방법과 소벨 테스트 그리고 부트스트래핑 모두를 테스트 해보실 것을 권합니다. 왜냐하면 이제는 발전된 소프트웨어와 컴퓨팅 능력 덕분에 쉽게 테스트 해볼 수 있기 때문입니다.\n이제 매개효과도 끝이 났네요. 실습을 해보도록 하겠습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>조절효과와 매개효과</span>"
    ]
  },
  {
    "objectID": "chapter3.html#매개효과를-실습해-보자",
    "href": "chapter3.html#매개효과를-실습해-보자",
    "title": "3  조절효과와 매개효과",
    "section": "3.4 매개효과를 실습해 보자",
    "text": "3.4 매개효과를 실습해 보자\n그럼 이제 매개효과를 실습해 보도록 하겠습니다.\n실습 데이터는 다음과 같습니다.\n\nKaggle.com에서 다운로드\n\nStudent Alcohol Consumption 데이터\n\nGithub에서 다운로드\n\n다운로드\n\n실습모형과 변수\n\n독립변수: Dalc (workday alcohol consumption: from 1 to 5)\n매개변수: studytime (weekly study time)\n종속변수: failures (number of class failures)\n\n\n단순하게 설명하자면 술을 먹으면 학습시간이 줄고 클래스에서 fail할 가능성이 높을 것이라는 가설을 세우고 이를 매개효과로 검증해보고자 하는 것입니다. 물론 연습용이다 보니, 가설이 좀 성급하게 만들어진 느낌이 있긴 합니다. 다만, 논리적으로 큰 문제가 없어보이므로 분석을 진행해 보겠습니다.\n\n\n\n\n\n\nFigure 3.8: 매개효과 실습 결과\n\n\n\n결과를 살펴보면, 1단계에서 독립변수 Dalc가 매개변수 studytime에 마이너스로 유의한 것을 확인할 수 있습니다. 즉, 술을 많이 마실수록 공부시간이 줄어드는 것이 맞다고 볼 수 있겠습니다. 2단계에서는 독립변수 Dalc가 종속변수 failures에 플러스로 유의합니다. 즉, 술믈 많이 마실수록 클래스에서 fail할 가능성이 더 높아지는 것이지요. 마지막으로 3단계서는 매개변수 studytime의 추가 투입에도 불구하고 독립변수 Dalc는 여전히 유의하고, 추가된 매개변수 studytime 또한 유의합니다. 결론적으로 부분매개효과가 있다고 볼 수 있습니다.\n총효과는 \\((-0.1847 \\times -0.1354) + 0.0886 \\approx 0.025 + 0.0886 = 0.1136\\)가 됩니다.\nSobel 테스트를 해보면, 다음과 같습니다.\n\n\n\n\n\n\nFigure 3.9: Sobel Test\n\n\n\n소벨테스트를 위한 4개의 값은 Figure 3.9 와 같습니다. 이를 테스트하기 위해 구글에서 간단하게 검색을 해보면 다음과 같은 웹이 있습니다. 여러분들은 다른 웹에서 테스트 해보셔도 좋습니다.\n소벨 테스트 계산\n\n\n\n\n\n\nFigure 3.10: Sobel Test\n\n\n\n그럼 아래의 링크를 이용해 실습을 해보시길 바랍니다. 고생 많으셨습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>조절효과와 매개효과</span>"
    ]
  },
  {
    "objectID": "chapter4.html",
    "href": "chapter4.html",
    "title": "4  로지스틱 회귀분석",
    "section": "",
    "text": "4.1 로지스틱 회귀분석이란 무엇인가?",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>로지스틱 회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter4.html#로지스틱-회귀분석이란-무엇인가",
    "href": "chapter4.html#로지스틱-회귀분석이란-무엇인가",
    "title": "4  로지스틱 회귀분석",
    "section": "",
    "text": "4.1.1 로지스틱 회귀분석이 필요한 이유\n사실 통계 공부를 이정도 하다보면, 좀 회의감이 들 수도 있습니다. 꽤 많은 내용을 공부한 것도 같은데 뭐 또 새로운 것을 배워야 하는지. 사실 많은 경우 이 정도 통계를 공부하면 슬슬 자신감도 붙고, 어느 정도 게을러질 만한 이유도 생기고 그렇습니다. 문제는 우리가 지나온 그 길들이 사실은 기초중의 기초였다는 사실이지요. 아니 회귀분석 하나 공부하고 알면 된거 아닌가 싶은데 또 다른 회귀분석이라니 이게 뭔 일인가 싶을 겁니다.\n맞습니다. 이래서 통계가 끝이 없는 것이지요.\n여기서 우선 말씀드릴 것은 통계적 방법은 지금 이순간에도 새로 만들어지고 세상에 나오고 이론적인 틀이 검증이 되면 누군가는 다시 그걸 소프트웨어에 옮겨서 만들어 시험하고 배포하고 있다는 사실입니다. 왜 이렇게 많은 통계적 방법이 필요할까요?\n그 주요한 이유 중의 하나는 바로 통계적 방법론이 가지고 있는 전제조건 때문입니다.\n앞에서 공부한 회귀분석은 사실 엄밀하게 따지면 OLS라고 해서 Ordinary Leat Square라는 것입니다. 굳이 우리말로 풀어 쓰자면 일반 최소 제곱 회귀분석 정도로 쓸 수 있겠네요. 그 이름처럼 일반적인 것인데, 문제는 이 일반적인 것이라는게 General이 아니고 Ordinary라는 것입니다. 즉, 아주 정상적이고 매우 합리적인 이상적인 데이터에 사용 가능하다는 것입니다.\n이 중에서도 가장 중요한 것이 바로 종속변수입니다. 앞에서 제가 자세하게 설명하지는 않았지만, OLS regression은 전제하고 있는 전제조건이 꽤 많습니다. 궁금하신 분들은 구글링을 하시던가 아니면 책을 찾아 보시길 바랍니다. 이중에서도 가장 예민한 것이 바로 종속변수입니다. OLS에서는 종속변수가 반드시 연속형 변수이어야 합니다. 사실 정확하게 말하자면 연속형 변수이면서도 음의 무한대부터 양의 무한대까지 존재해야하고 종속변수의 값과 값 사이에 무한한게 많은 값이 존재할 수 있어야 합니다. 쉽게말해, 종속변수가 특이한 경우 OLS를 쓸 수 없다는 의미입니다.\n로지스틱 회귀분석은 이런 이유로 만들어진 회귀분석입니다.\n로지스틱 회귀분석은 종속변수가 이항변수인 경우 사용됩니다. 여기서 이항변수란 쉽게 말해 값이 딱 두 가지 인 경우를 의미합니다. 예를 들자면, 성공/실패, Up/Down, 생존/죽음, Yes/No 이런 경우를 의미합니다. 아마도 어떤 분들은 아니 이런 종속변수라고 하더라도 OLS를 쓰면 안될까? 라는 의문을 가질 수 있습니다. 네, 쓸 수는 있는데 막상 써보면 상당한 문제가 있다는 것을 발견할 수 있습니다. 한번 살펴보겠습니다.\n\n\n4.1.2 이항변수가 종속변수인 경우 OLS를 적용한 예\n\n샘플예제: 타이타닉 생존 분석\n\nDownload\n\n컴피티션으로 가서 Titanic 검색 후 다운로드\n컴피티션의 룰을 수락하도록 함\n다운받은 데이터의 압축을 풀어서 사용\n파일 중에서 train.csv 를 사용\n\nGithub 다운로드\n\n사용할 변수\n\n종속변수: Survived (1: 생존, 0:비생존)\n독립변수: Pclass (Ticket class)\n\nFactor(그룹)변수: 1=1st, 2=2nd, 3=3rd\n더미변수 사용: 그룹이 3개이므로 2개의 더미변수 사용 (기준그룹: 1st)\n\n\n\n사용할 샘플 데이터는 유명한 타이타닉호의 생존자 데이터입니다. 여기서 우리가 궁금한 것은 타이타닉호 탑승자 중에 누가 생존할 가능성이 더 높았을까? 입니다. 그래서 우리는 종속변수를 생존했는지 (Survived=1), 아니면 생존하지 못했는지 (Survived=0)으로 나눠서 분석에 사용합니다. 인간의 생존은 했는지 못했는지입니다. 저 값이 0.5라면 반만 생존하던지 아니면 반만 생존 못하던지 해야하는데, 여기서 종속변수의 값은 탑승자 개인에 대한 생존여부이므로 0.5라는 값은 생존이라고 하기도 뭐하고 아니라고 하기도 뭐합니다. 벌써 여기서 문제가 발생하기 시작하죠.\n더욱이 우리는 위의 모델에서 탑승티켓에 따라서 생존여부가 달랐는지가 궁금합니다. 1등석부터 3등석까지 있는데, 당연히 1등석이 가장 비싸고 3등석이 가장 가격이 쌀 것입니다. 그렇다면 비싼 가격의 표를 산 탑승객이 더 생존 가능성이 높았는지 아닌지 궁금한 것이지요. 만약 1등석의 생존 가능성이 더 높았다면 참으로 억울하면서도 안타까운 일일 것입니다. 그렇다면 이제 이 데이터를 OLS로 분석해 보겠습니다.\n\n\n\n\n\n\nFigure 4.1: 이항변수의 OLS 결과\n\n\n\n우리는 1등석을 기준그룹으로 정했기 때문에, 총 3개의 범주를 가지고 있었으므로 모델에는 2개의 더미변수가 투입되었습니다. 결과분석을 해보면,\n\n1st class의 생존 예측 결과: 0.6296\n2nd class의 생존 예측 결과: 0.6296 – 0.1568 = 0.4728\n3rd class의 생존 예측 결과: 0.6296 – 0.3873 = 0.2423\n\n이렇게 되고, 셋 다 모두 유의합니다. 이제 이 결과를 어떻게 해석해야 할까요? 우리의 종속변수는 생존(1) 하거나 비생존(0)하거나 밖에 없습니다. 그러나, 위의 예측된 결과는 0도 아니고 1도 아닙니다. 0.5보다 크면 생존이고 0.5보다 작으면 비생존이라고 봐도 될까요? 이게 나쁜 발상은 아니긴 합니다만, 그렇다고 꼭 좋다고 할 수는 없습니다. 왜냐하면, 위의 경우처럼 2등석은 0.4728인데 이러면 생존하지 못한 것인데, 이 결과대로라면 2등석의 승객은 모두 생존하지 못했을까요? 반대로 1등석은 0.6296인데 이 결과대로라면 1등석 승객은 모두 생존한 것일까요? 모두 말이 되지 않습니다.\n이와 같이, 이항변수가 종속변수인 경우 OLS를 사용하면 기존의 회귀계수를 해석하는 방법에 문제가 있습니다.\n\n일반적인 OLS는 \\(X\\)가 1 증가할 때, \\(Y\\)가 \\(\\beta\\) 만큼 증가한다고 해석합니다\n위의 경우는 이러한 해석이 전혀 맞지 않습니다\n더불어, 0도 아닌 1도 아닌 예측값의 문제가 여전히 있습니다\n심지어, 위에서는 없었지만 경우에 따라 0보다 작은 예측값, 1보다 큰 예측값이 나오기도 합니다\n\n그렇다면, 우리가 기대하는 것은 무엇일까요?\n\n독립변수 \\(x\\)가 1 증가할 때, 종속변수가 1이 될 확률을 알고 싶습니다\n달리말하면, 위의 경우 1등석 승객에 비해 2등석 승객의 생존확률은 \\(\\beta\\)만큼 증가(감소)한다라고 말하고 싶은 것입니다\n따라서 이항변수가 종속변수인 경우 OLS는 사용이 불가할 것이라는 생각이 들죠\n이러한 이유로 우리는 새로 로지스틱 회귀분석을 배워야 합니다\n\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>로지스틱 회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter4.html#로짓과-로그오즈비",
    "href": "chapter4.html#로짓과-로그오즈비",
    "title": "4  로지스틱 회귀분석",
    "section": "4.2 로짓과 로그오즈비",
    "text": "4.2 로짓과 로그오즈비\n\n4.2.1 왜 대부분의 사람들이 로지스틱 회귀분석을 어려워할까?\n솔직히 저도 어려웠습니다. 뭐 어찌보면 지금도 어렵습니다. 왜냐하면, 그다지 수리적인 감각이 좋은 편은 아니기도 하고 제가 고등학교에서 문과를 나왔기 때문입니다. 어찌 하다보니, 학부에서는 이과쪽 전공을 하게 되었고, 석박사는 경영쪽을 하긴 했지만 통계쪽에 시간투자를 많이 하다보니 이렇게 되긴 했지만 여전히 통계도 어렵고 로지스틱회귀분석도 어렵습니다.\n하지만 제 생각엔 대부분의 경우 로지스틱 회귀분석의 기초를 아무도 알려주지 않기 때문에 어렵다는 생각이 듭니다. 로지스틱이란 말 자체가 어려운데 이걸 어떻게 이해할 수 있겠습니까? 이제 가장 기초부터 하나씩 알아가 보겠습니다.\n\n\n4.2.2 오즈(Odds)에 대해 알아보자\n갑자기 왠 오즈(Odds)인가 싶긴 하겠지만, 앞에서 우리가 보았듯이 우리가 알고 싶은 것은 결국 일종의 확률입니다. 타이타닉의 예에서 본 것 처럼 티켓의 등급에 따라서 생존할 확률이 얼마인지 궁금한 것이지요. 문제는 일반적으로 알고 있는 probability가 아닌 Odds라는 점에서 의아스러울 수 있습니다. 미리 말하자면 이런 경우 일반적인 probability 보다 odds가 더 유리하기 때문에 사용합니다. 일단 Odds에 대해 알아보겠습니다.\n오즈(Odds)는 원래 경마장에서 도박 지불률을 정할 때 사용한 것입니다. 만약 Odds를 사용하지 않고 일반적인 probability를 사용할 경우를 살펴보겠습니다.\n\n3마리의 말이 경마 경기에 출전하고 3마리 말의 승리할 확률이 다음과 같을 때,\n\nA말은 50%의 확률로 승리\nB말은 30%의 확률로 승리\nC말은 20%의 확률로 승리\n\n만약, 참가자에게 1000원에 마권을 사게 하고, 승자를 맞춘 사람에게 3000원씩 지불 한다면,\n\nA말의 마권을 살 경우 기대값 \\(= 3000원 \\times 50\\% = 1500원\\)\nB말의 마권을 살 경우 기대값 \\(= 3000원 \\times 30\\% = 900원\\)\nC말의 마권을 살 경우 기대값 \\(= 3000원 \\times 20\\% = 600원\\)\n\n그러므로, 바보가 아닌 이상 A말의 마권을 사는 것이 비용 1000원을 초과하는 유일한 선택이 됩니다\n\n만약, 여러분이 주인 입장이라면 50%의 확률로 A말이 이기면, 판매된 마권의 개수 \\(\\times\\) 2000원 만큼 손해이고, 50%의 확률로 A말이 지면, 판매된 마권의 개수 \\(\\times\\) 1000원 만큼 이익이됩니다. 그러므로 주인은 망할 수 밖에 없습니다. 따라서 이런 경우 경마 자체가 성립하지 않습니다. 사실 경마장이 존재하려면 어쩔 수 없이 경마장 주인이 돈을 벌어야 하기 때문입니다.\n그렇다면 여러분이 경마장 주인이라 생각하고 대안을 생각해 봅시다.\n\n대안 1: 손해를 보지 않기 위해 예상승률의 역수배로 상금을 지불하기로 함\n\n\n3마리의 말이 경마 경기에 출전하고 3마리 말의 승리할 확률은 위와 동일할 때,\n\nA말은 50%의 확률로 승리\nB말은 30%의 확률로 승리\nC말은 20%의 확률로 승리\n\n만약, 참가자에게 1000원에 마권을 사게 하고, 예상승률의 역수배로 상금을 지불하면,\n\nA말의 마권을 살 경우 기대값 \\(= 1000원 \\times \\frac{1}{50\\%} \\times 50\\% = 1000원\\)\nB말의 마권을 살 경우 기대값 \\(= 1000원 \\times \\frac{1}{30\\%} \\times 30\\% = 1000원\\)\nC말의 마권을 살 경우 기대값 \\(= 1000원 \\times \\frac{1}{20\\%} \\times 20\\% = 1000원\\)\n\n어느 쪽에 걸더라도 기대값 상금이 같아져 패자의 손실과 승자의 이익이 상쇄됨\n\n이렇게 되면, 경마장 주인은 돈을 더 벌지도 잃지도 않고 운영비만 들어가서 결국 손해입니다. 가장 큰 문제는 경마에 참여하는 참여자는 아무 말에나 걸어도 되므로 경마에 참가할 의미가 없어집니다. 더불어 어느 말에 걸어도 참여자 역시 누구도 돈을 벌지도 잃지도 않습니다. 완벽한 제로섬게임이 되어 경마장이 장사가 될리가 없습니다.\n그럼 다른 대안을 생각해 봅시다.\n\n대안 2: 오즈(Odds)의 역수배로 상금을 지불하기로 함\n\n\n3마리의 말이 경마 경기에 출전하고 3마리 말의 승리할 확률은 위와 동일할 때,\n\nA말은 50%의 확률로 승리\nB말은 30%의 확률로 승리\nC말은 20%의 확률로 승리\n\n만약, 참가자에게 1000원에 마권을 사게 하고, 오즈의 역수배로 상금을 지불할 경우,\n\n오즈(Odds) = \\(\\frac{확률}{1-확률}\\)을 의미하므로,\nA의 오즈(Odds) = \\(\\frac{50\\%}{1-50\\%} = 1\\)이므로, A말의 마권을 살 경우 기대값 \\(= 1000원 \\times 1 \\times 50\\% = 500원\\)\nB의 오즈(Odds) = \\(\\frac{30\\%}{1-30\\%} = 0.43\\)이므로, A말의 마권을 살 경우 기대값 \\(= 1000원 \\times \\frac{1}{0.43} \\times 30\\% \\approx 700원\\)\nC의 오즈(Odds) = \\(\\frac{20\\%}{1-20\\%} = 0.25\\)이므로, A말의 마권을 살 경우 기대값 \\(= 1000원 \\times \\frac{1}{0.25} \\times 20\\% = 800원\\)\n\n\n이렇게 되면, 일단 경마장 주인은 어떤 말이 이겨도 돈을 벌 수 있습니다. 더불어 참가자도 어느 말이 이겼는 지에 따라서 차등적으로 돈을 벌게 되므로 도전할 만한 가치가 있는 것이지요. 물론, 당연한 이야기이지만 어떤 참여자도 경마장을 이기지 못합니다. 1000원을 투자해도 1000원 이상 벌지 못하기 때문이지요. 물론 여기서 들게 된 예는 매우 단순한 예제이므로 현실의 경마와는 다르다는 점을 분명히 말씀드립니다. 하지만, Odds의 시작은 경마장이라는 것이지요.\n위의 예를 통해 오즈(Odds)가 무엇인지는 이해가 되시지요?\n\n\n4.2.3 오즈(Odds)와 일반적인 확률은 다르지 않을까?\n그렇습니다. 이런 질문을 할 수 있죠. 우리가 아는 일반적인 확률값 쉽게 말해 p값을 안쓰고 왜 이런 복잡한 것을 쓸까? 그리고 이 오즈(Odds)는 p값을 왜곡하는 것은 아닐까? 결론부터 말하자면 전혀 그렇지 않습니다. 이제 하나의 예제를 보겠습니다.\n다음은 어떤 희귀질병의 발병 여부를 도심지역과 비도심지역으로 나누어 본 것입니다.\n\n\n\nTable 4.1: 희귀질병의 발병 조사표\n\n\n\n\n\n\n\n\n\n\n\n\n발병 Yes\n발병 No\n합계\n\n\n\n\n도심지역\n1명\n1,999명\n2,000명\n\n\n비도심지역\n1명\n7,999명\n8,000명\n\n\n합 계\n2명\n9,998명\n10,000명\n\n\n\n\n\n\nTable 4.1 에서 보면, 도심지역이나 비도심지역이나 모두 1명의 희귀질환자가 발병했지만, 전체 인구수가 꽤 차이가 납니다. 이제 우리는 도심지역과 비도심지역의 오즈(Odds)를 각각 구한 뒤에 이를 나누어 오즈비(Odds ratio)를 만들겠습니다.\n\\[\\text{도심지역 주민의 발병 오즈(Odds)} = \\frac{\\frac{1}{2000}}{1-\\frac{1}{2000}} = \\frac{1}{1999}\\]\n\\[\\text{비도심지역 주민의 발병 오즈(Odds)} = \\frac{\\frac{1}{8000}}{1-\\frac{1}{8000}} = \\frac{1}{7999}\\]\n\\[\\text{비도심지역 대비 도심지역의 발병 오즈비(Odds ratio)} = \\frac{\\frac{1}{1999}}{\\frac{1}{7999}} \\approx 4.0015\\]\n그다지 익숙하지 않은 분들에게는 뭐 이리 복잡하게 계산하는가 싶겠지만, 일단 여기서 우리의 최종 관심사는 오즈비(Odds ratio)입니다. 복잡한 계산은 차치하고 우선 오즈(Odds)와 일반적인 확률값인 p값은 큰 차이가 없다는 것이 중요합니다. Table 4.1 에서 보면, 도심지역의 발병률은 p값의 경우 \\(\\frac{1}{2000}\\)이고 오즈(Odds)는 \\(\\frac{1}{1999}\\)로 거의 똑같습니다. 마찮가지로 비도심지역의 경우 p값은 \\(\\frac{1}{8000}\\)이고 오즈(Odds)는 \\(\\frac{1}{7999}\\)로 사실상 거의 차이가 없다고 할 수 있습니다. 따라서 오즈(Odds)로 계산한다고 해도 엄청나게 차이가 나지 않는다는 점입니다. 이는 비도심지역 대비 도심지역의 희귀질병 발생 비율에서도 동일합니다. 이경우 오즈비(Odds ratio)는 다음과 같습니다.\n\\[\\text{비도심지역 대비 도심지역 발병 오즈비(Odds ratio)} = \\frac{\\frac{1}{1999}}{\\frac{1}{7999}} \\approx 4.0015\\]\np값을 이용해 계산하면 4가 나오는 것과 비교해보면 거의 같은 수준이라고 볼 수 있습니다. 따라서 오즈(Odds)나 오즈비(Odds ratio)가 확률값을 왜곡하지 않는다는 것은 확실합니다.\n\n\n4.2.4 로짓(logit) = log(Odds ratio) = log(오즈비)\n중요한 것은 오즈(Odds)와 오즈(Odds)를 나눈 값인 오즈비(Odds ratio)가 되면, 다소 복잡해 보이긴 하지만 꽨 유용한 점이 있다는 사실입니다. 특히 이 오즈비(Odds ratio)에 log를 붙이면 활용범위가 넓어집니다.\n\np를 단순확률로 볼 때, p값의 범위는 \\(0 &lt; p &lt; 1\\)이 됩니다. 이때, 오즈(Odds)의 분모인 \\(1-p\\)의 범위는 동일하게 \\(0 &lt; 1-p &lt; 1\\)가 됩니다.\np가 0에 가까워질 수록 오즈비(Odds ratio)는 0을 향해 접근합니다.\np가 1에 가까워질 수록 오즈비(Odds ratio)는 무한대(\\(\\infty\\))를 향재 접근합니다.\n그러므로, 오즈비(Odds ratio)의 범위는 \\(0 &lt; 오즈비(Odds ratio) &lt; \\infty\\)가 되고,\n오즈비(Odds ratio)에 log를 붙인 log(Odds ratio)의 범위는 \\(-\\infty &lt; log(Odds ratio) &lt; \\infty\\)가 됩니다.\n여기서 log(Odds ratio)를 다른 말로 로짓(logit)이라고 부릅니다.\n\n아마도, 저와 같은 문과출신들은 이게 그래서 무슨 뜻이야? 라고 생각하실 것입니다. 특히, 위의 5번이 핵심인데 이해가 잘 안되시거나 고등학교 때 배운 로그가 잘 생각나시지 않는 분을 위해 위의 5번을 좀 더 자세하게 풀어보면 다음과 같습니다.\n\n로짓(logit) = log(Odds ratio) = log(오즈비)\n\n종속변수가 0과 1인 이항변수일 때: 오즈비(Odds ratio)를 구하면 최소값은 0이 됩니다\n\n이 값 0에 로그를 취하되 밑수를 네이피어수(e=2.718)로 할 경우 \\(\\log_e 0\\)은 마이너스 무한대가 됩니다\n왜냐하면, 2.718의 수를 계속 곱하더라도 2.718보다 작은 수가 되지는 않기 때문입니다\n그러나, 여러 차례 계속 나누게 되면 1보다 점점 작은 값이 되어 0을 향해 움직이는데,\n나눈다는 것은 마이너스 제곱의 의미이므로 마이너스 무한제곱이 되면 거의 0이 됩니다\n그래서 \\(\\log 0 = −\\infty\\)가 됩니다\n\n종속변수가 0과 1인 이항변수일 때: 오즈비(Odds ratio)를 구하면 최대값은 1이 됩니다\n\n오즈비는 \\(\\frac{1}{1-1}\\)이므로 계산이 불가 하지만 분모를 0에 가까운 0이 아닌 가장 작은 수라 가정하면, 1을 0에 가까운 가장 작은 수로 나누었으므로 무한대가 됩니다\n여기에 로그를 취하면 \\(\\log_e \\infty = \\infty\\)가 되는 것입니다\n\n\n\n\n\n4.2.5 그래서 뭐 어쩌라고?\n여기까지 와서도 이게 도대체 그래서 뭐 어쩌란 말이냐? 라고 물으실 수도 있습니다. 여기서 중요한 것은 앞서 왜 우리가 종속변수가 이항변수일 때, OLS 회귀분석을 사용하지 못하느냐를 다시 떠올려야 합니다. OLS 회귀분석에서 종속변수는 음의 무한대로부터 양의 무한대까지 가능한 연속변수이어야 한다고 했습니다. 위에서 우리가 어렵게 구한 로짓(logit)은 결국 0과 1이라는 이항변수를 음의 무한대에서 양의 무한대까지로 변환하는 일종의 변환방법인 것입니다.\n결론적으로, 우리의 종속변수가 이항변수일 때, 이 이항변수를 로짓(logit)으로 변환하면, OLS 회귀분석을 할 수 있다는 의미가 됩니다. 다만, 이렇게되면 기존의 OLS와는 다소 다른 점들이 있으므로 우리는 이제 그런 것들을 공부하면 됩니다.\n고생 많으셨습니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>로지스틱 회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter4.html#로지스틱-회귀분석을-해석해보자",
    "href": "chapter4.html#로지스틱-회귀분석을-해석해보자",
    "title": "4  로지스틱 회귀분석",
    "section": "4.3 로지스틱 회귀분석을 해석해보자",
    "text": "4.3 로지스틱 회귀분석을 해석해보자\n앞서 우리는 왜 굳이 로지스틱 회귀분석을 공부해야 하는지 그리고 왜 그렇게 복잡한 과정을 거쳐 로짓(logit)을 구하는지 알아봤습니다. 반복해 보자면 이렇게 오즈비(Odds ratio)에 로그를 취하면 이항변수도 연속형 변수마냥 OLS를 할 수 있다는 것을 알았습니다. 문제는 이렇게 종속변수를 변환하게 되면, 해석이 단순하지 않다는 점이 문제입니다. 사실 대부분의 논문들이 유의하다 유의하지 않다라고 앵무새처럼 반복할 뿐 이를 제대로 해석하는 논문은 생각보다 찾기 힘든 것이 현실입니다. 이번 기회에 로지스틱 회귀분석을 어떻게 해석해야 하는지 제대로 공부해 보도록 합시다.\n\n4.3.1 로지스틱 회귀분석의 예제\n우리는 앞서 보았던 타이타닉 생존자 데이터를 샘플로 하여 분석결과를 보고 해석해 보도록 하겠습니다.\n\n샘플예제: 타이타닉 생존 분석\n\nGithub 다운로드\n\n사용할 변수\n\n종속변수: Survived (1: 생존, 0:비생존)\n독립변수\n\nAge (나이): 연속형 변수\nFare (요금): 배에 탈 때, 낸 비용(아마도 앞서 본 Class와 상관관계가 많을 것임)\nGender (성별): 여성을 기준그룹(=0)으로 지정 (남성더미가 될 것임)\nSibSp (동반자): 여기서 동반자란 형제/자매 혹은 배우자의 숫자\n\n연속형 변수로 사용할 수도 있으나 여기서는 factor 변수로 사용\n\n\n\n\n일단 묻지도 따지지도 말고 결과표부터 보겠습니다. 상단은 OLS 회귀분석이고 하단이 로지스틱 회귀분석 결과입니다.\n\n\n\n\n\n\nFigure 4.2: OLS와 로지스틱 회귀분석 결과표\n\n\n\n회귀계수의 크기는 좀 다르긴 하지만 전체적으로 유의한지 아닌지는 비슷해 보이긴 합니다. OLS는 우리의 관심사가 아니므로 일단 넘어가 보겠습니다.\n\n\n\n\n\n\nFigure 4.3: 로지스틱 회귀분석 결과표\n\n\n\n우선 독립변수 Fare를 보겠습니다. p값을 보니 매우 유의합니다. 회귀계수는 0.0149인데 이걸 어떻게 해석하느냐가 문제입니다. 우선 유의할 경우 회귀계수의 +/-를 먼저 살펴보아야 합니다.\n\n회귀계수가 양수(+)이면 생존(Y=1) 가능성이 높은 것\n회귀계수가 음수(-)이면 생존(Y=1) 가능성이 낮은 것\n\n그러므로, 위의 Fare의 결과가 의미하는 것은 요금을 많이 낼 수록 생존의 가능성이 높아졌다는 것입니다. 물론 얼마나 높아졌는지는 해석을 해봐야 알 것입니다. 문제는 이 회귀계수 0.0149는 기존의 OLS처럼 해석할 수 없다는 것입니다. OLS의 경우 요금이 1 dollar 높아질 수록 생존확률이 0.0149 높아진다는 식으로 해석하겠지만 여기 종속변수에는 로그가 붙어 있으므로 이런 해석은 불가능합니다.\nlog를 제거하기 위해서는 exponential을 씁니다. 둘은 마치 곱셈과 나눗셈 마냥 짝을 이룬다고 보시면 됩니다. 이를 수학에서는 이렇게 표현합니다. exp(X)라고 합니다. 따로 계산하려고 하지말고 엑셀을 이용해서 함수 **=exp(#)*]**를 사용하시기 바랍니다. 괄호 안에 # 대신에 숫자를 넣으시면 됩니다. 계산을 해보면,\n\\[exp(0.0149) = 1.015\\]\n여기서 1.015는 오즈비(Odds ratio)입니다. 따라서, 해석은 다음과 같이 합니다. 요금이 1 dollar 증가할 수록, 생존 가능성은 1.015배 증가한다 회귀계수가 양수일 경우는 그래도 해석이 무난한 편입니다. 문제는 회귀계수가 음수일 경우가 해석이 쉽지 않다는 점입니다. 이를 확인하기 위해 Figure 4.3 의 Age 변수를 봅시다. Age 변수는 음의 방향으로 유의합니다. 즉, 나이가 많을 수록 생존확률은 낮아진다는 것입니다. 이제 이 음수인 회귀계수에 exponential을 붙여 계산을 해보면,\n\\[exp(-0.0224) \\approx 0.98\\]\n이게 무슨 뜻일까요? 정확한 해석은 이렇습니다. 나이가 1살 증가할 수록, 생존 가능성은 약 0.98배 증가한다 쉽게 이해가 되지 않으시지요? 주의할 점은 증가한다고 해석을 항상 해야한다는 점입니다. 그러나 실질적으로 1보다 작은 배수로 증가를 한다는 것은 결국 감소한다는 뜻입니다. 따라서 나이가 1살 증가할 수록 생존 가능성이 낮아지는 것은 맞긴한데, 0.98배 증가한다는 것은 도대체 얼마나 감소하는 것인지 헷가릴 수 밖에 없습니다. 다른 예를 하나 더 보겠습니다. SibSp3라는 변수는 더미변수로 동반자가 없는 경우에 비해 동반자가 3명인 경우의 생존확률을 의미합니다. 이 값 역시 마이너스로 유의합니다. 동반자가 1명이나 2명까지는 유의하지 않다가 3명이 되어서야 유의합니다. 의미상으로는 동반자가 3명인 경우 동반자가 없는 경우보다 생존확률이 훨씬 낮다는 의미가 됩니다. 이제 exponential을 붙여 계산해 보도록 합시다.\n\\[exp(-2.4616) \\approx 0.085\\]\n정확하게 해석해 보자면, 동반자가 없는 경우에 비해 동반자가 3명인 경우, 생존 가능성은 0.085배 증가한다라고 해석합니다. 도통 와 닿지 않는 해석입니다. 그래서 사실 로지스틱 회귀분석은 복잡하더라도 반드시 %로 변환하여 해석하는 것이 보다 좋습니다. 문제는 %로 변환하는 방법이 조금 복잡하다는 것입니다. 이 경우를 %로 변환해 보겠습니다.\n\\[\\{exp(-2.4616) – 1\\}×100 = -91.5\\]\n계산 방법은 exponential을 붙인 값에서 1을 빼고 다시 100을 곱하면 %로 변환됩니다. 위의 결과를 해석하면, 동반자가 없는 경우에 비해 동반자가 3명인 경우, 생존 가능성은 91.5% 감소한다라고 해석합니다. 사실 생존 확률이 91.5%나 감소한다는 것은 정말 엄청난 변화라고 볼 수 있습니다. 아무래도 지켜야할 동반자가 많을 수록 생존확률은 떨어지지만 그 시작이 3명부터라고 보면, 참 슬픈 일이 아닐 수 없습니다. 이는 4인 가족의 경우 생존 확률이 매우 낮다는 의미이기 때문입니다.\n그렇다면, 앞에서 봤던 Fare를 %로 변환하여 다시 해석해 봅시다.\n\\[\\{exp(0.0149) – 1\\}×100 = 1.5\\]\n즉, 요금이 1 dollar 증가할 수록, 생존 가능성은 1.5% 증가한다는 것입니다. 사실 이렇게 보면 큰 차이처럼 보이지 않아도 만약 100달러 정도 요금의 차이가 난다면 이는 거의 생존자체를 바꿀 수 있는 차이가 될 수도 있기 때문에 작다고만 할 수는 없을 것 같네요. 그럼 이제 마지막으로 성별에 따른 생존 확률를 보겠습니다.\n\n\n\n\n\n\nFigure 4.4: 성별에 따른 생존확률\n\n\n\n단순하게 exponential만 취하면 \\(exp(-2.4115) \\approx 0.09\\)가 되어, 여성에 비해 남성의 생존률은 0.09배 높다라는 결과가 됩니다. 가끔, 어떤 분들이 이런경우 귀찮으니 그냥 이 결과를 남성에 비해 여성의 생존률이 91% 정도 높다고 해석해도 되지 않나요? 라고 묻는 경우가 있습니다. 문제는 이런식의 해석이 완전히 틀렸다는 것입니다. 특히나, 기준그룹을 바꿔서 해석할 때는 정말 주의해야 합니다. 이 경우는 사실 0에서 1로 증가하는 것을 반대로 1에서 0으로 감소하는 것을 전제로 하는 해석입니다. 이게 잘 이해가 안되실 수도 있는데 일반 OLS에서는 독립변수 1의 증가나 1의 감소가 사실상 같은 의미가 됩니다. 그래서 OLS에서는 독립변수가 1 증가할 때, 종속변수가 회귀계수(\\(\\beta\\))만큼 증가한다고 해석합니다. 이 결과를 바꿔도 사실 동일합니다. OLS에서는 독립변수가 1 감소할 때, 종속변수가 회귀계수(\\(\\beta\\))만큼 감소한다라고 해석해도 아무 문제가 없습니다. 그러나 로지스틱 회귀분석에서는 독립변수의 감소는 회귀계수에 마이너스(-)를 붙여서 해석하는 방식으로 되어서는 안됩니다. 위의 경우 성별은 더미변수이므로, 0인 여성을 기준으로 1인 남성에 대한 회귀계수입니다. 따라서 해석도 여성대비 남성이 이러이러하다 라는식으로 해석해야 합니다. 그런데 위의 경우 만약 남성대비 여성이 이러이러하다고 해석하고자 한다면 이는 독립변수의 증가가 아닌 독립변수의 감소로 해석을 하는 것입니다.\n이제 %로 변환하여 제대로 계산해 봅시다. 이 경우 \\(exp(-2.4115) \\approx 0.09\\)이었기 때문에, 기준그룹을 바꿔서 해석하고자 한다면, 0.09가 아닌 \\(\\frac{1}{0.09}\\)을 넣고 계산해야 합니다. 이점이 가장 다른 부분입니다.\n\\[\\{\\frac{1}{0.09} – 1\\} ×100 \\approx 1011\\]\n상상할 수도 없는 엄청난 숫자가 나오네요. 해석하자면, 남성에 비해 여성의 생존률은 1011% 높다라고 해석해야 합니다. 놀랍습니다.\n정리해 보자면, 로지스틱 회귀분석 결과 해석할 때는,\n\nexp(회귀계수)는 오즈비(odds ratio)로 해석한다\n{exp(회귀계수) – 1} × 100 은 % 증가 또는 감소로 해석 가능하다\n독립변수가 1단위 증가할때와 1단위 감소할때의 해석은 다르다\n\n\\(\\{\\frac{1}{exp(\\text{회귀계수})} – 1\\} \\times 100\\) 으로 계산해서 해석해야 한다\n\n모든 독립변수의 증감에 대하여 종속변수가 1(Y=1)이 되는 확률로 해석한다\n\n로지스틱 회귀분석은 종속변수가 이항변수임에도 마치 OLS처럼 회귀분석을 할 수 있도록 해주는 매우 좋은 방법입니다. 하지만 해석이 까다롭고 조심스럽기 때문에 해석을 잘 하는 것이 무엇보다 중요합니다.\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>로지스틱 회귀분석</span>"
    ]
  },
  {
    "objectID": "chapter4.html#로지스틱-회귀분석을-실습해보자",
    "href": "chapter4.html#로지스틱-회귀분석을-실습해보자",
    "title": "4  로지스틱 회귀분석",
    "section": "4.4 로지스틱 회귀분석을 실습해보자",
    "text": "4.4 로지스틱 회귀분석을 실습해보자\n실습데이터는 계속 보아왔던 타이타닉 생존자 데이터를 이용하도록 하겠습니다.\n\n샘플예제: 타이타닉 생존 분석\n\nGithub 다운로드\n\n사용할 변수\n\n종속변수: Survived (1: 생존, 0:비생존)\n독립변수\n\nAge (나이): 연속형 변수\nFare (요금): 배에 탈 때, 낸 비용(아마도 앞서 본 Class와 상관관계가 많을 것임)\nGender (성별): 여성을 기준그룹(=0)으로 지정 (남성더미가 될 것임)\nSibSp (동반자): 여기서 동반자란 형제/자매 혹은 배우자의 숫자\n\n연속형 변수로 사용할 수도 있으나 여기서는 factor 변수로 사용\n\n\n\n\nYoutube 바로 가기",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>로지스틱 회귀분석</span>"
    ]
  }
]